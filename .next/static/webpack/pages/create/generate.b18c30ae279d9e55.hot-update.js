"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/create/generate",{

/***/ "./src/pages/create/generate.tsx":
/*!***************************************!*\
  !*** ./src/pages/create/generate.tsx ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/router */ \"./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _barrel_optimize_names_ArrowLeft_ArrowRight_Download_ImagePlus_Layers_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowLeft,ArrowRight,Download,ImagePlus,Layers,Settings!=!lucide-react */ \"__barrel_optimize__?names=ArrowLeft,ArrowRight,Download,ImagePlus,Layers,Settings!=!./node_modules/lucide-react/dist/esm/lucide-react.js\");\n/* harmony import */ var _styles_pages_create_Generate_module_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/styles/pages/create/Generate.module.css */ \"./src/styles/pages/create/Generate.module.css\");\n/* harmony import */ var _styles_pages_create_Generate_module_css__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_styles_pages_create_Generate_module_css__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _components_collection_TraitUploader__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/collection/TraitUploader */ \"./src/components/collection/TraitUploader.tsx\");\n/* harmony import */ var _components_generator_PreviewGenerate__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/generator/PreviewGenerate */ \"./src/components/generator/PreviewGenerate.tsx\");\n/* harmony import */ var _components_collection_ExportAssets__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/collection/ExportAssets */ \"./src/components/collection/ExportAssets.tsx\");\n/* harmony import */ var _components_collection_CollectionConfig__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/collection/CollectionConfig */ \"./src/components/collection/CollectionConfig.tsx\");\n/* harmony import */ var react_hot_toast__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-hot-toast */ \"./node_modules/react-hot-toast/dist/index.mjs\");\n/* harmony import */ var _lib_utils_generationUtils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/lib/utils/generationUtils */ \"./src/lib/utils/generationUtils.ts\");\n\nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n// Convert our Rule type to TraitUploaderRule type\nconst adaptRuleForTraitUploader = (rule)=>{\n    return {\n        id: rule.id,\n        type: rule.type === 'incompatible' ? 'exclude' : 'require',\n        sourceLayerId: '',\n        sourceTrait: '',\n        targetLayerId: '',\n        targetTrait: '',\n        traits: rule.traits\n    };\n};\n// Convert TraitUploaderRule type back to our Rule type\nconst adaptRuleFromTraitUploader = (rule)=>{\n    return {\n        id: rule.id,\n        type: rule.type === 'exclude' ? 'incompatible' : 'required',\n        traits: rule.traits || []\n    };\n};\nconst steps = [\n    {\n        id: 1,\n        title: 'Configure Collection',\n        icon: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowLeft_ArrowRight_Download_ImagePlus_Layers_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_10__.Settings, {\n            size: 20\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n            lineNumber: 122,\n            columnNumber: 15\n        }, undefined),\n        description: 'Set up collection details'\n    },\n    {\n        id: 2,\n        title: 'Upload Traits',\n        icon: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowLeft_ArrowRight_Download_ImagePlus_Layers_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_10__.Layers, {\n            size: 20\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n            lineNumber: 128,\n            columnNumber: 15\n        }, undefined),\n        description: 'Upload your trait layers'\n    },\n    {\n        id: 3,\n        title: 'Preview & Generate',\n        icon: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowLeft_ArrowRight_Download_ImagePlus_Layers_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_10__.ImagePlus, {\n            size: 20\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n            lineNumber: 134,\n            columnNumber: 15\n        }, undefined),\n        description: 'Preview combinations'\n    },\n    {\n        id: 4,\n        title: 'Export Assets',\n        icon: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowLeft_ArrowRight_Download_ImagePlus_Layers_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_10__.Download, {\n            size: 20\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n            lineNumber: 140,\n            columnNumber: 15\n        }, undefined),\n        description: 'Download your collection'\n    }\n];\nconst GenerateCollection = ()=>{\n    _s();\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const [currentStep, setCurrentStep] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(1);\n    const [layers, setLayers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [rules, setRules] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [characters, setCharacters] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [generatedAssets, setGeneratedAssets] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isGenerating, setIsGenerating] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"GenerateCollection.useEffect\": ()=>{\n            const storedLayers = localStorage.getItem('nft_layers');\n            const storedRules = localStorage.getItem('nft_rules');\n            const storedCharacters = localStorage.getItem('nft_characters');\n            if (storedLayers && storedRules) {\n                setLayers(JSON.parse(storedLayers));\n                setRules(JSON.parse(storedRules));\n            }\n            if (storedCharacters) {\n                try {\n                    setCharacters(JSON.parse(storedCharacters));\n                } catch (e) {\n                    console.error('Failed to parse stored characters:', e);\n                }\n            }\n        }\n    }[\"GenerateCollection.useEffect\"], []);\n    // Add collectionConfig state\n    const [collectionConfig, setCollectionConfig] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        supply: 100,\n        name: '',\n        symbol: '',\n        description: '',\n        namePrefix: '#',\n        startTokenId: 0,\n        format: 'png',\n        resolution: {\n            width: 1024,\n            height: 1024\n        },\n        royalties: 0,\n        creatorAddress: '',\n        externalUrl: ''\n    });\n    const [progress, setProgress] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        current: 0,\n        total: 0,\n        status: ''\n    });\n    const handleNext = ()=>{\n        if (currentStep < 4) {\n            setCurrentStep(currentStep + 1);\n        }\n    };\n    const handlePrevious = ()=>{\n        if (currentStep > 1) {\n            setCurrentStep(currentStep - 1);\n        }\n    };\n    const [supply, setSupply] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(1000);\n    // Memoize handlers to prevent unnecessary re-renders\n    const handleConfigUpdate = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"GenerateCollection.useCallback[handleConfigUpdate]\": (config)=>{\n            setCollectionConfig({\n                \"GenerateCollection.useCallback[handleConfigUpdate]\": (prevConfig)=>({\n                        ...prevConfig,\n                        ...config,\n                        supply: config.supply,\n                        startTokenId: 0,\n                        externalUrl: config.externalUrl || ''\n                    })\n            }[\"GenerateCollection.useCallback[handleConfigUpdate]\"]);\n            // Save to localStorage\n            localStorage.setItem('nft_collection_config', JSON.stringify(config));\n        }\n    }[\"GenerateCollection.useCallback[handleConfigUpdate]\"], []);\n    const handleLayersUpdate = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"GenerateCollection.useCallback[handleLayersUpdate]\": function(updatedLayers) {\n            let updatedRules = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [];\n            try {\n                console.log('Updating layers:', updatedLayers);\n                console.log('Updating rules:', updatedRules);\n                // Validate layers\n                if (!Array.isArray(updatedLayers)) {\n                    console.error('Invalid layers data:', updatedLayers);\n                    throw new Error('Layers must be an array');\n                }\n                // Ensure rules is always an array\n                const rulesToSet = Array.isArray(updatedRules) ? updatedRules : [];\n                // Update state\n                setLayers(updatedLayers);\n                if (rulesToSet.length > 0) {\n                    setRules(rulesToSet);\n                }\n                // Save to localStorage\n                try {\n                    localStorage.setItem('nft_layers', JSON.stringify(updatedLayers));\n                    localStorage.setItem('nft_rules', JSON.stringify(rulesToSet));\n                    console.log('Successfully saved layers and rules to localStorage');\n                } catch (storageError) {\n                    console.error('Error saving to localStorage:', storageError);\n                // Don't throw, just log the error\n                }\n                return true;\n            } catch (error) {\n                console.error('Error in handleLayersUpdate:', error);\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_8__.toast.error('Failed to update layers. Please try again.');\n                return false;\n            }\n        }\n    }[\"GenerateCollection.useCallback[handleLayersUpdate]\"], []);\n    const handleCharactersUpdate = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"GenerateCollection.useCallback[handleCharactersUpdate]\": (updatedCharacters)=>{\n            setCharacters(updatedCharacters);\n            localStorage.setItem('nft_characters', JSON.stringify(updatedCharacters));\n            // Combine all layers from characters for backward compatibility\n            const allLayers = updatedCharacters.reduce({\n                \"GenerateCollection.useCallback[handleCharactersUpdate].allLayers\": (acc, character)=>{\n                    return [\n                        ...acc,\n                        ...character.layers\n                    ];\n                }\n            }[\"GenerateCollection.useCallback[handleCharactersUpdate].allLayers\"], []);\n            if (allLayers.length > 0) {\n                setLayers(allLayers);\n                localStorage.setItem('nft_layers', JSON.stringify(allLayers));\n            }\n        }\n    }[\"GenerateCollection.useCallback[handleCharactersUpdate]\"], []);\n    const handleGenerate = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"GenerateCollection.useCallback[handleGenerate]\": async (settings, config)=>{\n            if (!layers.length) {\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_8__.toast.error('Please add layers and traits first');\n                return;\n            }\n            setIsGenerating(true);\n            setProgress({\n                current: 0,\n                total: 0,\n                status: 'Initializing generation...'\n            });\n            try {\n                const assets = [];\n                let totalGenerated = 0;\n                const totalToGenerate = config.supply;\n                // If we have characters, generate assets for each character based on their supply\n                if (characters.length > 0 && settings.characters) {\n                    const characterSummary = characters.map({\n                        \"GenerateCollection.useCallback[handleGenerate].characterSummary\": (c)=>\"\".concat(c.name, \": \").concat(c.supply)\n                    }[\"GenerateCollection.useCallback[handleGenerate].characterSummary\"]).join(', ');\n                    setProgress({\n                        current: 0,\n                        total: totalToGenerate,\n                        status: \"Generating for characters (\".concat(characterSummary, \")...\")\n                    });\n                    for (const character of characters){\n                        // Skip characters with no layers or traits\n                        if (!character.layers.length) continue;\n                        // Get character-specific layers\n                        const characterLayers = layers.filter({\n                            \"GenerateCollection.useCallback[handleGenerate].characterLayers\": (l)=>l.characterId === character.id\n                        }[\"GenerateCollection.useCallback[handleGenerate].characterLayers\"]);\n                        if (!characterLayers.length) continue;\n                        // Generate NFTs for this character\n                        const characterToGenerate = Math.min(character.supply, totalToGenerate - totalGenerated);\n                        for(let i = 0; i < characterToGenerate; i++){\n                            // Update progress\n                            setProgress({\n                                current: totalGenerated + i + 1,\n                                total: totalToGenerate,\n                                status: \"Generating \".concat(character.name, \" \").concat(i + 1, \"/\").concat(characterToGenerate, \"...\")\n                            });\n                            // Generate traits combination\n                            const selectedTraits = await selectTraitCombination(characterLayers, rules, settings);\n                            // Create NFT\n                            const tokenId = config.startTokenId + totalGenerated + i;\n                            const nftName = \"\".concat(config.namePrefix).concat(tokenId);\n                            // Generate image\n                            const { image, traits } = await generateImage(selectedTraits, settings, character.name);\n                            // Create metadata\n                            const metadata = {\n                                name: nftName,\n                                description: config.description,\n                                image: URL.createObjectURL(image),\n                                attributes: traits.map({\n                                    \"GenerateCollection.useCallback[handleGenerate]\": (trait)=>({\n                                            trait_type: trait.trait_type,\n                                            value: trait.value,\n                                            rarity: trait.rarity || 0\n                                        })\n                                }[\"GenerateCollection.useCallback[handleGenerate]\"])\n                            };\n                            if (config.symbol) metadata.symbol = config.symbol;\n                            if (config.creatorAddress) metadata.creator = config.creatorAddress;\n                            if (config.royalties !== undefined) metadata.royalties = config.royalties;\n                            // Add character type as a trait\n                            metadata.attributes.push({\n                                trait_type: \"Character Type\",\n                                value: character.name,\n                                rarity: 0\n                            });\n                            // Add asset to collection\n                            assets.push({\n                                id: tokenId,\n                                image,\n                                traits,\n                                metadata\n                            });\n                            // Yield execution to prevent UI freeze\n                            await new Promise({\n                                \"GenerateCollection.useCallback[handleGenerate]\": (resolve)=>setTimeout(resolve, 0)\n                            }[\"GenerateCollection.useCallback[handleGenerate]\"]);\n                        }\n                        totalGenerated += characterToGenerate;\n                    }\n                } else {\n                // Legacy generation without characters\n                // ... existing generation code ...\n                }\n                setGeneratedAssets(assets);\n                setProgress({\n                    current: assets.length,\n                    total: assets.length,\n                    status: 'Generation complete!'\n                });\n                setCollectionConfig(config);\n                // Save to localStorage\n                setTimeout({\n                    \"GenerateCollection.useCallback[handleGenerate]\": ()=>{\n                        setProgress({\n                            current: 0,\n                            total: 0,\n                            status: ''\n                        });\n                    }\n                }[\"GenerateCollection.useCallback[handleGenerate]\"], 2000);\n                return;\n            } catch (error) {\n                console.error('Generation error:', error);\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_8__.toast.error('Error during generation: ' + error.message);\n                return;\n            } finally{\n                setIsGenerating(false);\n            }\n        }\n    }[\"GenerateCollection.useCallback[handleGenerate]\"], [\n        layers,\n        rules,\n        characters,\n        setProgress\n    ]);\n    // Load saved collection config only once on mount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"GenerateCollection.useEffect\": ()=>{\n            const savedConfig = localStorage.getItem('nft_collection_config');\n            if (savedConfig) {\n                try {\n                    const parsed = JSON.parse(savedConfig);\n                    setCollectionConfig(parsed);\n                } catch (error) {\n                    console.error('Failed to parse saved config:', error);\n                }\n            }\n        }\n    }[\"GenerateCollection.useEffect\"], []); // Empty dependency array\n    const handleNextStep = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"GenerateCollection.useCallback[handleNextStep]\": ()=>{\n            setCurrentStep({\n                \"GenerateCollection.useCallback[handleNextStep]\": (prev)=>prev + 1\n            }[\"GenerateCollection.useCallback[handleNextStep]\"]);\n        }\n    }[\"GenerateCollection.useCallback[handleNextStep]\"], []);\n    const handlePreviousStep = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"GenerateCollection.useCallback[handlePreviousStep]\": ()=>{\n            setCurrentStep({\n                \"GenerateCollection.useCallback[handlePreviousStep]\": (prev)=>prev - 1\n            }[\"GenerateCollection.useCallback[handlePreviousStep]\"]);\n        }\n    }[\"GenerateCollection.useCallback[handlePreviousStep]\"], []);\n    const handleExport = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"GenerateCollection.useCallback[handleExport]\": ()=>{\n        // Export logic...\n        }\n    }[\"GenerateCollection.useCallback[handleExport]\"], []);\n    // Load saved layers on mount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"GenerateCollection.useEffect\": ()=>{\n            const savedLayers = localStorage.getItem('current_layers');\n            const savedRules = localStorage.getItem('current_rules');\n            if (savedLayers) {\n                setLayers(JSON.parse(savedLayers));\n            }\n            if (savedRules) {\n                setRules(JSON.parse(savedRules));\n            }\n        }\n    }[\"GenerateCollection.useEffect\"], []);\n    // Clear saved data when leaving trait uploader\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"GenerateCollection.useEffect\": ()=>{\n            if (currentStep !== 2) {\n                localStorage.removeItem('current_layers');\n                localStorage.removeItem('current_rules');\n            }\n        }\n    }[\"GenerateCollection.useEffect\"], [\n        currentStep\n    ]);\n    // Simplified step click handler - allows navigation to any step\n    const handleStepClick = (stepId)=>{\n        setCurrentStep(stepId);\n    };\n    const handleLayerUpload = (newLayers)=>{\n        setLayers(newLayers);\n    };\n    // Add helper functions\n    const validateTraitName = (layerId, traitName, layers, traitId)=>{\n        const layer = layers.find((l)=>l.id === layerId);\n        if (!layer) return true;\n        return !layer.traits.some((t)=>t.name.toLowerCase() === traitName.toLowerCase() && (!traitId || t.id !== traitId));\n    };\n    // Update the generation process to include rarity information in metadata\n    const createAsset = async (traits, id, settings)=>{\n        // Create a canvas element\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        if (!ctx) throw new Error('Could not get canvas context');\n        // Set canvas dimensions\n        canvas.width = settings.resolution.width;\n        canvas.height = settings.resolution.height;\n        // Fill with background color\n        ctx.fillStyle = settings.backgroundColor;\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n        // Draw each trait\n        for (const trait of traits){\n            // Skip traits with no image data\n            if (!trait.preview && (!trait.image || trait.image instanceof Blob)) {\n                console.warn(\"Trait \".concat(trait.name, \" has no usable image data\"));\n                continue;\n            }\n            // Load the image\n            try {\n                const img = new Image();\n                img.crossOrigin = 'anonymous';\n                // Use preview if it's not empty, otherwise use image if it's a string\n                const imageSource = trait.preview || (typeof trait.image === 'string' ? trait.image : '');\n                if (!imageSource) {\n                    console.warn(\"No valid image source for trait \".concat(trait.name));\n                    continue;\n                }\n                // Load the image\n                await new Promise((resolve, reject)=>{\n                    img.onload = ()=>resolve();\n                    img.onerror = ()=>reject(new Error(\"Failed to load image for trait: \".concat(trait.name)));\n                    img.src = imageSource;\n                });\n                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n            } catch (error) {\n                console.error(\"Error loading trait image: \".concat(trait.name), error);\n            }\n        }\n        // Convert canvas to data URL\n        const imageData = canvas.toDataURL(\"image/\".concat(settings.format));\n        // Create and return the asset\n        return {\n            id,\n            image: imageData,\n            traits: traits.map((trait)=>({\n                    trait_type: trait.layerName,\n                    value: trait.name,\n                    rarity: trait.rarity || 50 // Default to 50% if rarity is undefined\n                })),\n            metadata: {\n                name: \"\".concat(settings.namePrefix).concat(id),\n                description: settings.description,\n                image: imageData,\n                attributes: traits.map((trait)=>({\n                        trait_type: trait.layerName,\n                        value: trait.name,\n                        rarity: trait.rarity || 50 // Default to 50% if rarity is undefined\n                    }))\n            }\n        };\n    };\n    const updateProgress = (current, total)=>{\n        setProgress((prev)=>({\n                ...prev,\n                current,\n                status: \"Generating \".concat(current, \" of \").concat(total, \"...\")\n            }));\n    };\n    // Add cleanup on component unmount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"GenerateCollection.useEffect\": ()=>{\n            return ({\n                \"GenerateCollection.useEffect\": ()=>{\n                    // Only clear if navigating away from the generate flow\n                    if (!window.location.pathname.includes('/create')) {\n                        sessionStorage.removeItem('current_generated_assets');\n                    }\n                }\n            })[\"GenerateCollection.useEffect\"];\n        }\n    }[\"GenerateCollection.useEffect\"], []);\n    // Add function to regenerate images from stored data\n    const regenerateImagesFromTraits = async (storedAssets)=>{\n        const regenerated = [];\n        const defaultSettings = {\n            supply: collectionConfig.supply,\n            preventDuplicates: true,\n            shuffleOutput: true,\n            maxRetries: 200,\n            format: collectionConfig.format,\n            resolution: collectionConfig.resolution,\n            backgroundColor: '#FFFFFF',\n            startTokenId: Number(collectionConfig.startTokenId),\n            namePrefix: collectionConfig.namePrefix,\n            description: collectionConfig.description\n        };\n        for (const asset of storedAssets){\n            // Find the actual trait objects from the layers\n            const selectedTraits = asset.traits.map((trait)=>{\n                const layer = layers.find((l)=>l.name === trait.trait_type);\n                return layer === null || layer === void 0 ? void 0 : layer.traits.find((t)=>t.name === trait.value);\n            }).filter(Boolean);\n            // Regenerate the image\n            const image = await createImage(selectedTraits, defaultSettings);\n            regenerated.push({\n                ...asset,\n                image,\n                metadata: {\n                    name: \"\".concat(collectionConfig.namePrefix).concat(asset.id),\n                    description: collectionConfig.description,\n                    image: \"\".concat(asset.id, \".\").concat(defaultSettings.format),\n                    attributes: asset.traits\n                }\n            });\n        }\n        return regenerated;\n    };\n    // Load saved assets on mount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"GenerateCollection.useEffect\": ()=>{\n            try {\n                const count = parseInt(localStorage.getItem('generated_assets_count') || '0');\n                if (count > 0) {\n                    const chunks = Math.ceil(count / 10); // Assuming CHUNK_SIZE is 10\n                    const loadedAssets = [];\n                    for(let i = 0; i < chunks; i++){\n                        const chunk = localStorage.getItem(\"generated_assets_\".concat(i));\n                        if (chunk) {\n                            loadedAssets.push(...JSON.parse(chunk));\n                        }\n                    }\n                    if (loadedAssets.length > 0) {\n                        setGeneratedAssets(loadedAssets);\n                    }\n                }\n            } catch (error) {\n                console.error('Error loading saved assets:', error);\n            }\n        }\n    }[\"GenerateCollection.useEffect\"], []);\n    // Load saved assets on mount, but not for preview step\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"GenerateCollection.useEffect\": ()=>{\n            const savedAssets = sessionStorage.getItem('current_generated_assets');\n            if (savedAssets) {\n                try {\n                    const parsed = JSON.parse(savedAssets);\n                    setGeneratedAssets(parsed);\n                } catch (error) {\n                    console.error('Error loading saved assets:', error);\n                }\n            }\n        }\n    }[\"GenerateCollection.useEffect\"], []);\n    // Only clear storage when leaving the generate flow completely\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"GenerateCollection.useEffect\": ()=>{\n            return ({\n                \"GenerateCollection.useEffect\": ()=>{\n                    if (!window.location.pathname.includes('/create')) {\n                        sessionStorage.removeItem('current_generated_assets');\n                    }\n                }\n            })[\"GenerateCollection.useEffect\"];\n        }\n    }[\"GenerateCollection.useEffect\"], []);\n    // Load saved assets on mount, but not for preview step\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"GenerateCollection.useEffect\": ()=>{\n            if (currentStep !== 3) {\n                const savedAssets = sessionStorage.getItem('current_generated_assets');\n                if (savedAssets) {\n                    try {\n                        const parsed = JSON.parse(savedAssets);\n                        setGeneratedAssets(parsed);\n                    } catch (error) {\n                        console.error('Error loading saved assets:', error);\n                    }\n                }\n            }\n        }\n    }[\"GenerateCollection.useEffect\"], [\n        currentStep\n    ]);\n    // Clean up object URLs on unmount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"GenerateCollection.useEffect\": ()=>{\n            return ({\n                \"GenerateCollection.useEffect\": ()=>{\n                    // Clear all generated assets and temporary files\n                    if (window.URL) {\n                        // Revoke any object URLs\n                        document.querySelectorAll('img[src^=\"blob:\"]').forEach({\n                            \"GenerateCollection.useEffect\": (img)=>{\n                                URL.revokeObjectURL(img.src);\n                            }\n                        }[\"GenerateCollection.useEffect\"]);\n                    }\n                }\n            })[\"GenerateCollection.useEffect\"];\n        }\n    }[\"GenerateCollection.useEffect\"], []);\n    // Update the handleStepChange function\n    const handleStepChange = (newStep)=>{\n        if (newStep === 4 && (!generatedAssets || generatedAssets.length === 0)) {\n            react_hot_toast__WEBPACK_IMPORTED_MODULE_8__.toast.error('Please generate assets first');\n            return;\n        }\n        setCurrentStep(newStep);\n    };\n    const handleSupplyChange = (newSupply)=>{\n        setSupply(newSupply);\n        if (collectionConfig) {\n            setCollectionConfig({\n                ...collectionConfig,\n                supply: newSupply\n            });\n        }\n    };\n    const handleComplete = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"GenerateCollection.useCallback[handleComplete]\": ()=>{\n            // Clear stored data\n            localStorage.removeItem('nft_layers');\n            localStorage.removeItem('nft_rules');\n            localStorage.removeItem('nft_collection_config');\n            // Reset states\n            setLayers([]);\n            setRules([]);\n            setGeneratedAssets([]);\n            setCollectionConfig({\n                supply: 100,\n                name: '',\n                symbol: '',\n                description: '',\n                namePrefix: '#',\n                startTokenId: 0,\n                format: 'png',\n                resolution: {\n                    width: 1024,\n                    height: 1024\n                },\n                royalties: 0,\n                creatorAddress: '',\n                externalUrl: ''\n            });\n            // Redirect to home or success page\n            router.push('/');\n        }\n    }[\"GenerateCollection.useCallback[handleComplete]\"], [\n        router\n    ]);\n    const renderCurrentStep = ()=>{\n        switch(currentStep){\n            case 1:\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_collection_CollectionConfig__WEBPACK_IMPORTED_MODULE_7__.CollectionConfigComponent, {\n                    onConfigUpdate: (config)=>setCollectionConfig(config),\n                    onNext: ()=>setCurrentStep(2),\n                    onBack: ()=>router.push('/'),\n                    hideNavigation: true\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                    lineNumber: 724,\n                    columnNumber: 21\n                }, undefined);\n            case 2:\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_collection_TraitUploader__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                    onNext: ()=>setCurrentStep(3),\n                    onBack: ()=>setCurrentStep(1),\n                    onLayersUpdate: (updatedLayers, updatedRules)=>{\n                        // Convert the rules back to our format\n                        const convertedRules = updatedRules ? updatedRules.map((rule)=>adaptRuleFromTraitUploader(rule)) : undefined;\n                        handleLayersUpdate(updatedLayers, convertedRules);\n                    },\n                    layers: layers,\n                    initialRules: rules.map(adaptRuleForTraitUploader),\n                    characters: characters,\n                    hideNavigation: true\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                    lineNumber: 733,\n                    columnNumber: 21\n                }, undefined);\n            case 3:\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_generator_PreviewGenerate__WEBPACK_IMPORTED_MODULE_5__.PreviewGenerate, {\n                    layers: layers,\n                    rules: rules,\n                    isGenerating: isGenerating,\n                    progress: progress,\n                    onGenerate: handleGenerate,\n                    onBack: ()=>setCurrentStep(2),\n                    onNext: ()=>{\n                        if (generatedAssets.length > 0) {\n                            setCurrentStep(4);\n                        } else {\n                            react_hot_toast__WEBPACK_IMPORTED_MODULE_8__.toast.error('Please generate assets first');\n                        }\n                    },\n                    generatedAssets: generatedAssets,\n                    collectionConfig: collectionConfig,\n                    onLayersUpdate: handleLayersUpdate,\n                    onAssetsGenerated: setGeneratedAssets,\n                    supply: collectionConfig.supply,\n                    onSupplyChange: handleSupplyChange,\n                    characters: characters,\n                    hideNavigation: true\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                    lineNumber: 751,\n                    columnNumber: 21\n                }, undefined);\n            case 4:\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_collection_ExportAssets__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                    generatedAssets: generatedAssets,\n                    onBack: ()=>setCurrentStep(3),\n                    onComplete: handleComplete,\n                    collectionConfig: collectionConfig,\n                    hideNavigation: true\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                    lineNumber: 777,\n                    columnNumber: 21\n                }, undefined);\n            default:\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    children: \"Invalid step\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                    lineNumber: 786,\n                    columnNumber: 24\n                }, undefined);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: (_styles_pages_create_Generate_module_css__WEBPACK_IMPORTED_MODULE_3___default().container),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: (_styles_pages_create_Generate_module_css__WEBPACK_IMPORTED_MODULE_3___default().header),\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>router.push('/create'),\n                        className: (_styles_pages_create_Generate_module_css__WEBPACK_IMPORTED_MODULE_3___default().backButton),\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowLeft_ArrowRight_Download_ImagePlus_Layers_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_10__.ArrowLeft, {\n                                size: 20\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                                lineNumber: 794,\n                                columnNumber: 9\n                            }, undefined),\n                            \"Back\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                        lineNumber: 793,\n                        columnNumber: 5\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: (_styles_pages_create_Generate_module_css__WEBPACK_IMPORTED_MODULE_3___default().stepsWrapper),\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handlePrevious,\n                                className: \"\".concat((_styles_pages_create_Generate_module_css__WEBPACK_IMPORTED_MODULE_3___default().navButton), \" \").concat(currentStep === 1 ? (_styles_pages_create_Generate_module_css__WEBPACK_IMPORTED_MODULE_3___default().disabled) : ''),\n                                disabled: currentStep === 1,\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: (_styles_pages_create_Generate_module_css__WEBPACK_IMPORTED_MODULE_3___default().navIndicator),\n                                        children: [\n                                            \"Previous: \",\n                                            currentStep > 1 ? steps[currentStep - 2].title : ''\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                                        lineNumber: 803,\n                                        columnNumber: 13\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowLeft_ArrowRight_Download_ImagePlus_Layers_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_10__.ArrowLeft, {\n                                        size: 20\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                                        lineNumber: 804,\n                                        columnNumber: 13\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                                lineNumber: 798,\n                                columnNumber: 9\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: (_styles_pages_create_Generate_module_css__WEBPACK_IMPORTED_MODULE_3___default().steps),\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: (_styles_pages_create_Generate_module_css__WEBPACK_IMPORTED_MODULE_3___default().progressBar),\n                                        style: {\n                                            width: \"\".concat((currentStep - 1) / 3 * 100, \"%\")\n                                        }\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                                        lineNumber: 807,\n                                        columnNumber: 13\n                                    }, undefined),\n                                    steps.map((step, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"\".concat((_styles_pages_create_Generate_module_css__WEBPACK_IMPORTED_MODULE_3___default().step), \" \").concat(currentStep >= step.id ? (_styles_pages_create_Generate_module_css__WEBPACK_IMPORTED_MODULE_3___default().active) : ''),\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: (_styles_pages_create_Generate_module_css__WEBPACK_IMPORTED_MODULE_3___default().stepIcon),\n                                                    children: step.icon\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                                                    lineNumber: 816,\n                                                    columnNumber: 21\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: (_styles_pages_create_Generate_module_css__WEBPACK_IMPORTED_MODULE_3___default().stepContent),\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                                            children: step.title\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                                                            lineNumber: 820,\n                                                            columnNumber: 25\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            children: step.description\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                                                            lineNumber: 821,\n                                                            columnNumber: 25\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                                                    lineNumber: 819,\n                                                    columnNumber: 21\n                                                }, undefined)\n                                            ]\n                                        }, step.id, true, {\n                                            fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                                            lineNumber: 812,\n                                            columnNumber: 17\n                                        }, undefined))\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                                lineNumber: 806,\n                                columnNumber: 9\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleNext,\n                                className: \"\".concat((_styles_pages_create_Generate_module_css__WEBPACK_IMPORTED_MODULE_3___default().navButton), \" \").concat(currentStep === 4 ? (_styles_pages_create_Generate_module_css__WEBPACK_IMPORTED_MODULE_3___default().disabled) : ''),\n                                disabled: currentStep === 4,\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: (_styles_pages_create_Generate_module_css__WEBPACK_IMPORTED_MODULE_3___default().navIndicator),\n                                        children: [\n                                            \"Next: \",\n                                            currentStep < 4 ? steps[currentStep].title : ''\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                                        lineNumber: 831,\n                                        columnNumber: 13\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowLeft_ArrowRight_Download_ImagePlus_Layers_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_10__.ArrowRight, {\n                                        size: 20\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                                        lineNumber: 832,\n                                        columnNumber: 13\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                                lineNumber: 826,\n                                columnNumber: 9\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                        lineNumber: 797,\n                        columnNumber: 5\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                lineNumber: 792,\n                columnNumber: 13\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: (_styles_pages_create_Generate_module_css__WEBPACK_IMPORTED_MODULE_3___default().content),\n                children: renderCurrentStep()\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n                lineNumber: 837,\n                columnNumber: 1\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Desktop\\\\nft generator\\\\src\\\\pages\\\\create\\\\generate.tsx\",\n        lineNumber: 791,\n        columnNumber: 9\n    }, undefined);\n};\n_s(GenerateCollection, \"wRVEXDn3QgA+/7cdRk6mCbS0oas=\", false, function() {\n    return [\n        next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter\n    ];\n});\n_c = GenerateCollection;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (GenerateCollection);\n// Add helper function to convert Blob to base64 string\nconst blobToBase64 = (blob)=>{\n    return new Promise((resolve, reject)=>{\n        const reader = new FileReader();\n        reader.onloadend = ()=>{\n            if (typeof reader.result === 'string') {\n                resolve(reader.result);\n            } else {\n                reject(new Error('Failed to convert blob to base64'));\n            }\n        };\n        reader.onerror = reject;\n        reader.readAsDataURL(blob);\n    });\n};\n// Add helper function to convert base64 back to Blob\nconst base64ToBlob = (base64, type)=>{\n    const byteString = atob(base64.split(',')[1]);\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n    for(let i = 0; i < byteString.length; i++){\n        ia[i] = byteString.charCodeAt(i);\n    }\n    return new Blob([\n        ab\n    ], {\n        type\n    });\n};\n// Update isDuplicateCombination function to match PreviewGenerate\nconst isDuplicateCombination = (newTraits, existingAssets)=>{\n    return existingAssets.some((asset)=>{\n        return asset.traits.every((existingTrait)=>{\n            return newTraits.some((newTrait)=>newTrait.trait_type === existingTrait.trait_type && newTrait.value === existingTrait.value);\n        });\n    });\n};\n// Fix the createImage function\nconst createImage = async (selectedTraits, settings)=>{\n    try {\n        var _settings_resolution, _settings_resolution1;\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        if (!ctx) throw new Error('Could not get canvas context');\n        canvas.width = (settings === null || settings === void 0 ? void 0 : (_settings_resolution = settings.resolution) === null || _settings_resolution === void 0 ? void 0 : _settings_resolution.width) || 1024;\n        canvas.height = (settings === null || settings === void 0 ? void 0 : (_settings_resolution1 = settings.resolution) === null || _settings_resolution1 === void 0 ? void 0 : _settings_resolution1.height) || 1024;\n        // Fill with background color\n        ctx.fillStyle = (settings === null || settings === void 0 ? void 0 : settings.backgroundColor) || '#FFFFFF';\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n        // Draw each trait\n        for (const trait of selectedTraits){\n            try {\n                // Skip traits with no image data\n                if (!trait.preview && (!trait.image || trait.image instanceof Blob)) {\n                    console.warn(\"Trait \".concat(trait.name, \" has no usable image data\"));\n                    continue;\n                }\n                const image = await new Promise((resolve, reject)=>{\n                    const img = new Image();\n                    img.crossOrigin = 'anonymous';\n                    img.onload = ()=>resolve(img);\n                    img.onerror = ()=>reject(new Error(\"Failed to load image for trait: \".concat(trait.name)));\n                    // Use preview if it's not empty, otherwise use image if it's a string\n                    const imageSource = trait.preview || (typeof trait.image === 'string' ? trait.image : '');\n                    if (!imageSource) {\n                        reject(new Error(\"No valid image source for trait: \".concat(trait.name)));\n                        return;\n                    }\n                    img.src = imageSource;\n                });\n                ctx.drawImage(image, 0, 0, canvas.width, canvas.height);\n            } catch (error) {\n                console.error(\"Error drawing trait \".concat(trait.name, \":\"), error);\n            }\n        }\n        return canvas.toDataURL(\"image/\".concat((settings === null || settings === void 0 ? void 0 : settings.format) || 'png'));\n    } catch (error) {\n        console.error('Error creating image:', error);\n        return '';\n    }\n};\n// Add helper functions for character-based generation\nconst selectTraitCombination = async (characterLayers, rules, settings)=>{\n    // Use the existing selectTraits function or implement a simplified version\n    return (0,_lib_utils_generationUtils__WEBPACK_IMPORTED_MODULE_9__.selectTraits)(characterLayers, rules);\n};\nconst generateImage = async (selectedTraits, settings, characterName)=>{\n    var _settings_resolution, _settings_resolution1;\n    // Draw traits on canvas\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n        throw new Error('Could not create canvas context');\n    }\n    // Set canvas size based on settings\n    canvas.width = ((_settings_resolution = settings.resolution) === null || _settings_resolution === void 0 ? void 0 : _settings_resolution.width) || 1024;\n    canvas.height = ((_settings_resolution1 = settings.resolution) === null || _settings_resolution1 === void 0 ? void 0 : _settings_resolution1.height) || 1024;\n    // Set background color if specified\n    if (settings.backgroundColor) {\n        ctx.fillStyle = settings.backgroundColor;\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n    }\n    // Sort traits by z-index (if available)\n    const sortedTraits = [\n        ...selectedTraits\n    ].sort((a, b)=>{\n        const aIndex = a.zIndex || 0;\n        const bIndex = b.zIndex || 0;\n        return aIndex - bIndex;\n    });\n    // Draw each trait\n    for (const trait of sortedTraits){\n        try {\n            let img;\n            if (typeof trait.image === 'string') {\n                // For data URLs or paths\n                img = new Image();\n                await new Promise((resolve, reject)=>{\n                    img.onload = ()=>resolve();\n                    img.onerror = ()=>reject(new Error(\"Failed to load image for \".concat(trait.name)));\n                    img.src = trait.image;\n                });\n            } else if (trait.image instanceof Blob) {\n                // For blob images\n                img = new Image();\n                const url = URL.createObjectURL(trait.image);\n                await new Promise((resolve, reject)=>{\n                    img.onload = ()=>resolve();\n                    img.onerror = ()=>reject(new Error(\"Failed to load image for \".concat(trait.name)));\n                    img.src = url;\n                });\n                URL.revokeObjectURL(url);\n            } else if (trait.preview) {\n                // Use preview as fallback\n                img = new Image();\n                await new Promise((resolve, reject)=>{\n                    img.onload = ()=>resolve();\n                    img.onerror = ()=>reject(new Error(\"Failed to load preview for \".concat(trait.name)));\n                    img.src = trait.preview;\n                });\n            } else {\n                console.warn(\"No valid image for trait: \".concat(trait.name));\n                continue;\n            }\n            // Draw the image\n            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n        } catch (error) {\n            console.error(\"Error drawing trait \".concat(trait.name, \":\"), error);\n        }\n    }\n    // Convert canvas to blob\n    const format = settings.format || 'png';\n    const image = await new Promise((resolve, reject)=>{\n        canvas.toBlob((blob)=>{\n            if (blob) resolve(blob);\n            else reject(new Error('Failed to create image blob'));\n        }, \"image/\".concat(format), 0.9);\n    });\n    // Prepare trait attributes\n    const traits = sortedTraits.map((trait)=>({\n            trait_type: trait.layerName,\n            value: trait.name,\n            rarity: trait.rarity || 0\n        }));\n    return {\n        image,\n        traits\n    };\n};\nvar _c;\n$RefreshReg$(_c, \"GenerateCollection\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFHLElBQU0xQztvQkFDbkJxQyxJQUFJTSxPQUFPLEdBQUcsSUFBTUYsT0FBTyxJQUFJdEYsTUFBTSw4QkFBeUMsT0FBWHFDLE1BQU1uRSxJQUFJO29CQUM3RWdILElBQUlPLEdBQUcsR0FBR3BELE1BQU0wQyxPQUFPO2dCQUMzQjtZQUNKLE9BQU87Z0JBQ0hsSCxRQUFRb0gsSUFBSSxDQUFDLDZCQUF3QyxPQUFYNUMsTUFBTW5FLElBQUk7Z0JBQ3BEO1lBQ0o7WUFFQSxpQkFBaUI7WUFDakJ3RyxJQUFJZ0IsU0FBUyxDQUFDUixLQUFLLEdBQUcsR0FBR1gsT0FBTy9GLEtBQUssRUFBRStGLE9BQU85RixNQUFNO1FBRXhELEVBQUUsT0FBT1gsT0FBTztZQUNaRCxRQUFRQyxLQUFLLENBQUMsdUJBQWtDLE9BQVh1RSxNQUFNbkUsSUFBSSxFQUFDLE1BQUlKO1FBQ3hEO0lBQ0o7SUFFQSx5QkFBeUI7SUFDekIsTUFBTVEsU0FBU3FDLFNBQVNyQyxNQUFNLElBQUk7SUFDbEMsTUFBTXlELFFBQVEsTUFBTSxJQUFJYSxRQUFjLENBQUNDLFNBQVN5QztRQUM1Q2YsT0FBT3lILE1BQU0sQ0FDVCxDQUFDL0I7WUFDRyxJQUFJQSxNQUFNcEgsUUFBUW9IO2lCQUNiM0UsT0FBTyxJQUFJdEYsTUFBTTtRQUMxQixHQUNBLFNBQWdCLE9BQVAxQixTQUNUO0lBRVI7SUFFQSwyQkFBMkI7SUFDM0IsTUFBTXRDLFNBQVN3UCxhQUFheEssR0FBRyxDQUFDcUIsQ0FBQUEsUUFBVTtZQUN0Q0MsWUFBWUQsTUFBTXdELFNBQVM7WUFDM0J0RCxPQUFPRixNQUFNbkUsSUFBSTtZQUNqQnNFLFFBQVFILE1BQU1HLE1BQU0sSUFBSTtRQUM1QjtJQUVBLE9BQU87UUFBRVQ7UUFBTy9GO0lBQU87QUFDM0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcSFBcXE9uZURyaXZlXFxEZXNrdG9wXFxuZnQgZ2VuZXJhdG9yXFxzcmNcXHBhZ2VzXFxjcmVhdGVcXGdlbmVyYXRlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJztcclxuaW1wb3J0IHsgQXJyb3dMZWZ0LCBBcnJvd1JpZ2h0LCBTZXR0aW5ncywgTGF5ZXJzLCBJbWFnZVBsdXMsIERvd25sb2FkLCBVc2VycyB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XHJcblxyXG5pbXBvcnQgc3R5bGVzIGZyb20gJ0Avc3R5bGVzL3BhZ2VzL2NyZWF0ZS9HZW5lcmF0ZS5tb2R1bGUuY3NzJztcclxuaW1wb3J0IHsgXHJcbiAgICBUcmFpdExheWVyLCBcclxuICAgIFRyYWl0LFxyXG4gICAgR2VuZXJhdGlvblNldHRpbmdzLCBcclxuICAgIEdlbmVyYXRpb25Qcm9ncmVzcyxcclxuICAgIE5GVE1ldGFkYXRhLCBcclxuICAgIFJ1bGUsXHJcbiAgICBJQ29sbGVjdGlvbkNvbmZpZyxcclxuICAgIENoYXJhY3RlclxyXG59IGZyb20gJ0AvbGliL3R5cGVzJztcclxuaW1wb3J0IFRyYWl0VXBsb2FkZXIgZnJvbSAnQC9jb21wb25lbnRzL2NvbGxlY3Rpb24vVHJhaXRVcGxvYWRlcic7XHJcbmltcG9ydCB7IFByZXZpZXdHZW5lcmF0ZSB9IGZyb20gJ0AvY29tcG9uZW50cy9nZW5lcmF0b3IvUHJldmlld0dlbmVyYXRlJztcclxuaW1wb3J0IEV4cG9ydEFzc2V0cyBmcm9tICdAL2NvbXBvbmVudHMvY29sbGVjdGlvbi9FeHBvcnRBc3NldHMnO1xyXG5pbXBvcnQgeyBDb2xsZWN0aW9uQ29uZmlnQ29tcG9uZW50IH0gZnJvbSAnQC9jb21wb25lbnRzL2NvbGxlY3Rpb24vQ29sbGVjdGlvbkNvbmZpZyc7XHJcbmltcG9ydCBDaGFyYWN0ZXJNYW5hZ2VyIGZyb20gJ0AvY29tcG9uZW50cy9jb2xsZWN0aW9uL0NoYXJhY3Rlck1hbmFnZXInO1xyXG5pbXBvcnQgSlNaaXAgZnJvbSAnanN6aXAnO1xyXG5pbXBvcnQgeyBJUEZTVXBsb2FkZXIgfSBmcm9tICdAL2xpYi9zZXJ2aWNlcy9JUEZTVXBsb2FkZXInO1xyXG5pbXBvcnQgeyB0b2FzdCB9IGZyb20gJ3JlYWN0LWhvdC10b2FzdCc7XHJcbmltcG9ydCB7IHNlbGVjdFRyYWl0cywgY2FsY3VsYXRlUG9zc2libGVDb21iaW5hdGlvbnMgfSBmcm9tICdAL2xpYi91dGlscy9nZW5lcmF0aW9uVXRpbHMnO1xyXG5cclxuaW50ZXJmYWNlIFByZXZpZXdHZW5lcmF0ZVByb3BzIHtcclxuICAgIGxheWVyczogVHJhaXRMYXllcltdO1xyXG4gICAgcnVsZXM6IFJ1bGVbXTtcclxuICAgIGlzR2VuZXJhdGluZzogYm9vbGVhbjtcclxuICAgIHByb2dyZXNzOiBHZW5lcmF0aW9uUHJvZ3Jlc3M7XHJcbiAgICBvbkdlbmVyYXRlOiAoc2V0dGluZ3M6IEdlbmVyYXRpb25TZXR0aW5ncywgY29uZmlnOiBJQ29sbGVjdGlvbkNvbmZpZykgPT4gUHJvbWlzZTx2b2lkPjtcclxuICAgIG9uQmFjazogKCkgPT4gdm9pZDtcclxuICAgIG9uTmV4dDogKCkgPT4gdm9pZDtcclxuICAgIGdlbmVyYXRlZEFzc2V0cz86IEdlbmVyYXRlZEFzc2V0W107XHJcbiAgICBjb2xsZWN0aW9uQ29uZmlnOiBJQ29sbGVjdGlvbkNvbmZpZztcclxuICAgIG9uTGF5ZXJzVXBkYXRlPzogKGxheWVyczogVHJhaXRMYXllcltdLCBydWxlczogUnVsZVtdKSA9PiB2b2lkO1xyXG4gICAgb25Bc3NldHNHZW5lcmF0ZWQ/OiAoYXNzZXRzOiBHZW5lcmF0ZWRBc3NldFtdKSA9PiB2b2lkO1xyXG4gICAgc3VwcGx5OiBudW1iZXI7XHJcbiAgICBvblN1cHBseUNoYW5nZTogKHN1cHBseTogbnVtYmVyKSA9PiB2b2lkO1xyXG4gICAgY2hhcmFjdGVyczogQ2hhcmFjdGVyW107XHJcbiAgICBoaWRlTmF2aWdhdGlvbj86IGJvb2xlYW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBHZW5lcmF0ZWRBc3NldCB7XHJcbiAgICBpZDogbnVtYmVyO1xyXG4gICAgaW1hZ2U6IHN0cmluZyB8IEJsb2I7XHJcbiAgICB0cmFpdHM6IEFycmF5PHtcclxuICAgICAgICB0cmFpdF90eXBlOiBzdHJpbmc7XHJcbiAgICAgICAgdmFsdWU6IHN0cmluZztcclxuICAgICAgICByYXJpdHk6IG51bWJlcjtcclxuICAgIH0+O1xyXG4gICAgbWV0YWRhdGE6IHtcclxuICAgICAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgZGVzY3JpcHRpb246IHN0cmluZztcclxuICAgICAgICBpbWFnZTogc3RyaW5nO1xyXG4gICAgICAgIGF0dHJpYnV0ZXM6IEFycmF5PHtcclxuICAgICAgICAgICAgdHJhaXRfdHlwZTogc3RyaW5nO1xyXG4gICAgICAgICAgICB2YWx1ZTogc3RyaW5nO1xyXG4gICAgICAgICAgICByYXJpdHk6IG51bWJlcjtcclxuICAgICAgICB9PjtcclxuICAgICAgICBzeW1ib2w/OiBzdHJpbmc7XHJcbiAgICAgICAgY3JlYXRvcj86IHN0cmluZztcclxuICAgICAgICByb3lhbHRpZXM/OiBudW1iZXI7XHJcbiAgICAgICAgY29tcGlsZXI/OiBzdHJpbmc7XHJcbiAgICB9O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgRXhwb3J0QXNzZXRzUHJvcHMge1xyXG4gICAgZ2VuZXJhdGVkQXNzZXRzOiBHZW5lcmF0ZWRBc3NldFtdO1xyXG4gICAgb25CYWNrOiAoKSA9PiB2b2lkO1xyXG4gICAgb25Db21wbGV0ZTogKCkgPT4gdm9pZDtcclxuICAgIGNvbGxlY3Rpb25Db25maWc6IElDb2xsZWN0aW9uQ29uZmlnO1xyXG4gICAgaGlkZU5hdmlnYXRpb24/OiBib29sZWFuO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RvcmVkQXNzZXQge1xyXG4gICAgaWQ6IG51bWJlcjtcclxuICAgIHRyYWl0czogQXJyYXk8e1xyXG4gICAgICAgIHRyYWl0X3R5cGU6IHN0cmluZztcclxuICAgICAgICB2YWx1ZTogc3RyaW5nO1xyXG4gICAgICAgIHJhcml0eTogbnVtYmVyO1xyXG4gICAgfT47XHJcbn1cclxuXHJcbi8vIEFkZCBhIHR5cGUgYWRhcHRlciBmb3IgdGhlIHJ1bGVzXHJcbmludGVyZmFjZSBUcmFpdFVwbG9hZGVyUnVsZSB7XHJcbiAgICBpZDogc3RyaW5nO1xyXG4gICAgc291cmNlTGF5ZXJJZDogc3RyaW5nO1xyXG4gICAgc291cmNlVHJhaXQ6IHN0cmluZztcclxuICAgIHRhcmdldExheWVySWQ6IHN0cmluZztcclxuICAgIHRhcmdldFRyYWl0OiBzdHJpbmc7XHJcbiAgICB0eXBlOiAncmVxdWlyZScgfCAnZXhjbHVkZSc7XHJcbiAgICB0cmFpdHM/OiBzdHJpbmdbXTsgLy8gT3B0aW9uYWwgZm9yIGNvbXBhdGliaWxpdHlcclxufVxyXG5cclxuLy8gQ29udmVydCBvdXIgUnVsZSB0eXBlIHRvIFRyYWl0VXBsb2FkZXJSdWxlIHR5cGVcclxuY29uc3QgYWRhcHRSdWxlRm9yVHJhaXRVcGxvYWRlciA9IChydWxlOiBSdWxlKTogVHJhaXRVcGxvYWRlclJ1bGUgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBpZDogcnVsZS5pZCxcclxuICAgICAgICB0eXBlOiBydWxlLnR5cGUgPT09ICdpbmNvbXBhdGlibGUnID8gJ2V4Y2x1ZGUnIDogJ3JlcXVpcmUnLFxyXG4gICAgICAgIHNvdXJjZUxheWVySWQ6ICcnLFxyXG4gICAgICAgIHNvdXJjZVRyYWl0OiAnJyxcclxuICAgICAgICB0YXJnZXRMYXllcklkOiAnJyxcclxuICAgICAgICB0YXJnZXRUcmFpdDogJycsXHJcbiAgICAgICAgdHJhaXRzOiBydWxlLnRyYWl0c1xyXG4gICAgfTtcclxufTtcclxuXHJcbi8vIENvbnZlcnQgVHJhaXRVcGxvYWRlclJ1bGUgdHlwZSBiYWNrIHRvIG91ciBSdWxlIHR5cGVcclxuY29uc3QgYWRhcHRSdWxlRnJvbVRyYWl0VXBsb2FkZXIgPSAocnVsZTogVHJhaXRVcGxvYWRlclJ1bGUpOiBSdWxlID0+IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaWQ6IHJ1bGUuaWQsXHJcbiAgICAgICAgdHlwZTogcnVsZS50eXBlID09PSAnZXhjbHVkZScgPyAnaW5jb21wYXRpYmxlJyA6ICdyZXF1aXJlZCcsXHJcbiAgICAgICAgdHJhaXRzOiBydWxlLnRyYWl0cyB8fCBbXVxyXG4gICAgfTtcclxufTtcclxuXHJcbmNvbnN0IHN0ZXBzID0gW1xyXG4gICAge1xyXG4gICAgICAgIGlkOiAxLFxyXG4gICAgICAgIHRpdGxlOiAnQ29uZmlndXJlIENvbGxlY3Rpb24nLFxyXG4gICAgICAgIGljb246IDxTZXR0aW5ncyBzaXplPXsyMH0gLz4sXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdTZXQgdXAgY29sbGVjdGlvbiBkZXRhaWxzJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBpZDogMixcclxuICAgICAgICB0aXRsZTogJ1VwbG9hZCBUcmFpdHMnLFxyXG4gICAgICAgIGljb246IDxMYXllcnMgc2l6ZT17MjB9IC8+LFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVXBsb2FkIHlvdXIgdHJhaXQgbGF5ZXJzJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBpZDogMyxcclxuICAgICAgICB0aXRsZTogJ1ByZXZpZXcgJiBHZW5lcmF0ZScsXHJcbiAgICAgICAgaWNvbjogPEltYWdlUGx1cyBzaXplPXsyMH0gLz4sXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdQcmV2aWV3IGNvbWJpbmF0aW9ucydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgaWQ6IDQsXHJcbiAgICAgICAgdGl0bGU6ICdFeHBvcnQgQXNzZXRzJyxcclxuICAgICAgICBpY29uOiA8RG93bmxvYWQgc2l6ZT17MjB9IC8+LFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnRG93bmxvYWQgeW91ciBjb2xsZWN0aW9uJ1xyXG4gICAgfVxyXG5dO1xyXG5cclxuY29uc3QgR2VuZXJhdGVDb2xsZWN0aW9uID0gKCkgPT4ge1xyXG4gICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XHJcbiAgICBjb25zdCBbY3VycmVudFN0ZXAsIHNldEN1cnJlbnRTdGVwXSA9IHVzZVN0YXRlKDEpO1xyXG4gICAgY29uc3QgW2xheWVycywgc2V0TGF5ZXJzXSA9IHVzZVN0YXRlPFRyYWl0TGF5ZXJbXT4oW10pO1xyXG4gICAgY29uc3QgW3J1bGVzLCBzZXRSdWxlc10gPSB1c2VTdGF0ZTxSdWxlW10+KFtdKTtcclxuICAgIGNvbnN0IFtjaGFyYWN0ZXJzLCBzZXRDaGFyYWN0ZXJzXSA9IHVzZVN0YXRlPENoYXJhY3RlcltdPihbXSk7XHJcbiAgICBjb25zdCBbZ2VuZXJhdGVkQXNzZXRzLCBzZXRHZW5lcmF0ZWRBc3NldHNdID0gdXNlU3RhdGU8R2VuZXJhdGVkQXNzZXRbXT4oW10pO1xyXG4gICAgY29uc3QgW2lzR2VuZXJhdGluZywgc2V0SXNHZW5lcmF0aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHN0b3JlZExheWVycyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCduZnRfbGF5ZXJzJyk7XHJcbiAgICAgICAgY29uc3Qgc3RvcmVkUnVsZXMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbmZ0X3J1bGVzJyk7XHJcbiAgICAgICAgY29uc3Qgc3RvcmVkQ2hhcmFjdGVycyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCduZnRfY2hhcmFjdGVycycpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChzdG9yZWRMYXllcnMgJiYgc3RvcmVkUnVsZXMpIHtcclxuICAgICAgICAgICAgc2V0TGF5ZXJzKEpTT04ucGFyc2Uoc3RvcmVkTGF5ZXJzKSk7XHJcbiAgICAgICAgICAgIHNldFJ1bGVzKEpTT04ucGFyc2Uoc3RvcmVkUnVsZXMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHN0b3JlZENoYXJhY3RlcnMpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHNldENoYXJhY3RlcnMoSlNPTi5wYXJzZShzdG9yZWRDaGFyYWN0ZXJzKSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBzdG9yZWQgY2hhcmFjdGVyczonLCBlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sIFtdKTtcclxuICAgIFxyXG4gICAgXHJcbiAgICAvLyBBZGQgY29sbGVjdGlvbkNvbmZpZyBzdGF0ZVxyXG4gICAgY29uc3QgW2NvbGxlY3Rpb25Db25maWcsIHNldENvbGxlY3Rpb25Db25maWddID0gdXNlU3RhdGU8SUNvbGxlY3Rpb25Db25maWc+KHtcclxuICAgICAgICBzdXBwbHk6IDEwMCxcclxuICAgICAgICBuYW1lOiAnJyxcclxuICAgICAgICBzeW1ib2w6ICcnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcclxuICAgICAgICBuYW1lUHJlZml4OiAnIycsXHJcbiAgICAgICAgc3RhcnRUb2tlbklkOiAwLFxyXG4gICAgICAgIGZvcm1hdDogJ3BuZycsXHJcbiAgICAgICAgcmVzb2x1dGlvbjogeyB3aWR0aDogMTAyNCwgaGVpZ2h0OiAxMDI0IH0sXHJcbiAgICAgICAgcm95YWx0aWVzOiAwLFxyXG4gICAgICAgIGNyZWF0b3JBZGRyZXNzOiAnJyxcclxuICAgICAgICBleHRlcm5hbFVybDogJydcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IFtwcm9ncmVzcywgc2V0UHJvZ3Jlc3NdID0gdXNlU3RhdGU8R2VuZXJhdGlvblByb2dyZXNzPih7XHJcbiAgICAgICAgY3VycmVudDogMCxcclxuICAgICAgICB0b3RhbDogMCxcclxuICAgICAgICBzdGF0dXM6ICcnXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBoYW5kbGVOZXh0ID0gKCkgPT4ge1xyXG4gICAgICAgIGlmIChjdXJyZW50U3RlcCA8IDQpIHtcclxuICAgICAgICAgICAgc2V0Q3VycmVudFN0ZXAoY3VycmVudFN0ZXAgKyAxKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBjb25zdCBoYW5kbGVQcmV2aW91cyA9ICgpID0+IHtcclxuICAgICAgICBpZiAoY3VycmVudFN0ZXAgPiAxKSB7XHJcbiAgICAgICAgICAgIHNldEN1cnJlbnRTdGVwKGN1cnJlbnRTdGVwIC0gMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBcclxuXHJcbiAgICBjb25zdCBbc3VwcGx5LCBzZXRTdXBwbHldID0gdXNlU3RhdGUoMTAwMCk7XHJcblxyXG4gICAgLy8gTWVtb2l6ZSBoYW5kbGVycyB0byBwcmV2ZW50IHVubmVjZXNzYXJ5IHJlLXJlbmRlcnNcclxuICAgIGNvbnN0IGhhbmRsZUNvbmZpZ1VwZGF0ZSA9IHVzZUNhbGxiYWNrKChjb25maWc6IElDb2xsZWN0aW9uQ29uZmlnKSA9PiB7XHJcbiAgICAgICAgc2V0Q29sbGVjdGlvbkNvbmZpZyhwcmV2Q29uZmlnID0+ICh7XHJcbiAgICAgICAgICAgIC4uLnByZXZDb25maWcsXHJcbiAgICAgICAgICAgIC4uLmNvbmZpZyxcclxuICAgICAgICAgICAgc3VwcGx5OiBjb25maWcuc3VwcGx5LFxyXG4gICAgICAgICAgICBzdGFydFRva2VuSWQ6IDAsXHJcbiAgICAgICAgICAgIGV4dGVybmFsVXJsOiBjb25maWcuZXh0ZXJuYWxVcmwgfHwgJydcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgLy8gU2F2ZSB0byBsb2NhbFN0b3JhZ2VcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbmZ0X2NvbGxlY3Rpb25fY29uZmlnJywgSlNPTi5zdHJpbmdpZnkoY29uZmlnKSk7XHJcbiAgICB9LCBbXSk7XHJcblxyXG4gICAgY29uc3QgaGFuZGxlTGF5ZXJzVXBkYXRlID0gdXNlQ2FsbGJhY2soKHVwZGF0ZWRMYXllcnM6IFRyYWl0TGF5ZXJbXSwgdXBkYXRlZFJ1bGVzOiBSdWxlW10gPSBbXSkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVcGRhdGluZyBsYXllcnM6JywgdXBkYXRlZExheWVycyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVcGRhdGluZyBydWxlczonLCB1cGRhdGVkUnVsZXMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVmFsaWRhdGUgbGF5ZXJzXHJcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh1cGRhdGVkTGF5ZXJzKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCBsYXllcnMgZGF0YTonLCB1cGRhdGVkTGF5ZXJzKTtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTGF5ZXJzIG11c3QgYmUgYW4gYXJyYXknKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRW5zdXJlIHJ1bGVzIGlzIGFsd2F5cyBhbiBhcnJheVxyXG4gICAgICAgICAgICBjb25zdCBydWxlc1RvU2V0ID0gQXJyYXkuaXNBcnJheSh1cGRhdGVkUnVsZXMpID8gdXBkYXRlZFJ1bGVzIDogW107XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgc3RhdGVcclxuICAgICAgICAgICAgc2V0TGF5ZXJzKHVwZGF0ZWRMYXllcnMpO1xyXG4gICAgICAgICAgICBpZiAocnVsZXNUb1NldC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRSdWxlcyhydWxlc1RvU2V0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gU2F2ZSB0byBsb2NhbFN0b3JhZ2VcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCduZnRfbGF5ZXJzJywgSlNPTi5zdHJpbmdpZnkodXBkYXRlZExheWVycykpO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ25mdF9ydWxlcycsIEpTT04uc3RyaW5naWZ5KHJ1bGVzVG9TZXQpKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgc2F2ZWQgbGF5ZXJzIGFuZCBydWxlcyB0byBsb2NhbFN0b3JhZ2UnKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoc3RvcmFnZUVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgdG8gbG9jYWxTdG9yYWdlOicsIHN0b3JhZ2VFcnJvcik7XHJcbiAgICAgICAgICAgICAgICAvLyBEb24ndCB0aHJvdywganVzdCBsb2cgdGhlIGVycm9yXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGhhbmRsZUxheWVyc1VwZGF0ZTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHRvYXN0LmVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIGxheWVycy4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH0sIFtdKTtcclxuXHJcbiAgICBjb25zdCBoYW5kbGVDaGFyYWN0ZXJzVXBkYXRlID0gdXNlQ2FsbGJhY2soKHVwZGF0ZWRDaGFyYWN0ZXJzOiBDaGFyYWN0ZXJbXSkgPT4ge1xyXG4gICAgICAgIHNldENoYXJhY3RlcnModXBkYXRlZENoYXJhY3RlcnMpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCduZnRfY2hhcmFjdGVycycsIEpTT04uc3RyaW5naWZ5KHVwZGF0ZWRDaGFyYWN0ZXJzKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ29tYmluZSBhbGwgbGF5ZXJzIGZyb20gY2hhcmFjdGVycyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxyXG4gICAgICAgIGNvbnN0IGFsbExheWVycyA9IHVwZGF0ZWRDaGFyYWN0ZXJzLnJlZHVjZSgoYWNjLCBjaGFyYWN0ZXIpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIFsuLi5hY2MsIC4uLmNoYXJhY3Rlci5sYXllcnNdO1xyXG4gICAgICAgIH0sIFtdIGFzIFRyYWl0TGF5ZXJbXSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGFsbExheWVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHNldExheWVycyhhbGxMYXllcnMpO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbmZ0X2xheWVycycsIEpTT04uc3RyaW5naWZ5KGFsbExheWVycykpO1xyXG4gICAgICAgIH1cclxuICAgIH0sIFtdKTtcclxuXHJcbiAgICBjb25zdCBoYW5kbGVHZW5lcmF0ZSA9IHVzZUNhbGxiYWNrKGFzeW5jIChcclxuICAgICAgICBzZXR0aW5nczogR2VuZXJhdGlvblNldHRpbmdzLCBcclxuICAgICAgICBjb25maWc6IElDb2xsZWN0aW9uQ29uZmlnXHJcbiAgICApOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgICAgICBpZiAoIWxheWVycy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdG9hc3QuZXJyb3IoJ1BsZWFzZSBhZGQgbGF5ZXJzIGFuZCB0cmFpdHMgZmlyc3QnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2V0SXNHZW5lcmF0aW5nKHRydWUpO1xyXG4gICAgICAgIHNldFByb2dyZXNzKHsgY3VycmVudDogMCwgdG90YWw6IDAsIHN0YXR1czogJ0luaXRpYWxpemluZyBnZW5lcmF0aW9uLi4uJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBhc3NldHM6IEdlbmVyYXRlZEFzc2V0W10gPSBbXTtcclxuICAgICAgICAgICAgbGV0IHRvdGFsR2VuZXJhdGVkID0gMDtcclxuICAgICAgICAgICAgY29uc3QgdG90YWxUb0dlbmVyYXRlID0gY29uZmlnLnN1cHBseTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgY2hhcmFjdGVycywgZ2VuZXJhdGUgYXNzZXRzIGZvciBlYWNoIGNoYXJhY3RlciBiYXNlZCBvbiB0aGVpciBzdXBwbHlcclxuICAgICAgICAgICAgaWYgKGNoYXJhY3RlcnMubGVuZ3RoID4gMCAmJiBzZXR0aW5ncy5jaGFyYWN0ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFyYWN0ZXJTdW1tYXJ5ID0gY2hhcmFjdGVycy5tYXAoYyA9PiBgJHtjLm5hbWV9OiAke2Muc3VwcGx5fWApLmpvaW4oJywgJyk7XHJcbiAgICAgICAgICAgICAgICBzZXRQcm9ncmVzcyh7IFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQ6IDAsIFxyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsOiB0b3RhbFRvR2VuZXJhdGUsIFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogYEdlbmVyYXRpbmcgZm9yIGNoYXJhY3RlcnMgKCR7Y2hhcmFjdGVyU3VtbWFyeX0pLi4uYCBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNoYXJhY3RlciBvZiBjaGFyYWN0ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCBjaGFyYWN0ZXJzIHdpdGggbm8gbGF5ZXJzIG9yIHRyYWl0c1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hhcmFjdGVyLmxheWVycy5sZW5ndGgpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdldCBjaGFyYWN0ZXItc3BlY2lmaWMgbGF5ZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hhcmFjdGVyTGF5ZXJzID0gbGF5ZXJzLmZpbHRlcihsID0+IGwuY2hhcmFjdGVySWQgPT09IGNoYXJhY3Rlci5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGFyYWN0ZXJMYXllcnMubGVuZ3RoKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBORlRzIGZvciB0aGlzIGNoYXJhY3RlclxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJhY3RlclRvR2VuZXJhdGUgPSBNYXRoLm1pbihjaGFyYWN0ZXIuc3VwcGx5LCB0b3RhbFRvR2VuZXJhdGUgLSB0b3RhbEdlbmVyYXRlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyYWN0ZXJUb0dlbmVyYXRlOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHByb2dyZXNzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFByb2dyZXNzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQ6IHRvdGFsR2VuZXJhdGVkICsgaSArIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbDogdG90YWxUb0dlbmVyYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBgR2VuZXJhdGluZyAke2NoYXJhY3Rlci5uYW1lfSAke2kgKyAxfS8ke2NoYXJhY3RlclRvR2VuZXJhdGV9Li4uYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIHRyYWl0cyBjb21iaW5hdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZFRyYWl0cyA9IGF3YWl0IHNlbGVjdFRyYWl0Q29tYmluYXRpb24oY2hhcmFjdGVyTGF5ZXJzLCBydWxlcywgc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIE5GVFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2tlbklkID0gY29uZmlnLnN0YXJ0VG9rZW5JZCArIHRvdGFsR2VuZXJhdGVkICsgaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmZ0TmFtZSA9IGAke2NvbmZpZy5uYW1lUHJlZml4fSR7dG9rZW5JZH1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgaW1hZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBpbWFnZSwgdHJhaXRzIH0gPSBhd2FpdCBnZW5lcmF0ZUltYWdlKHNlbGVjdGVkVHJhaXRzLCBzZXR0aW5ncywgY2hhcmFjdGVyLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG1ldGFkYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhOiBORlRNZXRhZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG5mdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogY29uZmlnLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2U6IFVSTC5jcmVhdGVPYmplY3RVUkwoaW1hZ2UpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogdHJhaXRzLm1hcCh0cmFpdCA9PiAoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWl0X3R5cGU6IHRyYWl0LnRyYWl0X3R5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRyYWl0LnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhcml0eTogdHJhaXQucmFyaXR5IHx8IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5zeW1ib2wpIG1ldGFkYXRhLnN5bWJvbCA9IGNvbmZpZy5zeW1ib2w7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcuY3JlYXRvckFkZHJlc3MpIG1ldGFkYXRhLmNyZWF0b3IgPSBjb25maWcuY3JlYXRvckFkZHJlc3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcucm95YWx0aWVzICE9PSB1bmRlZmluZWQpIG1ldGFkYXRhLnJveWFsdGllcyA9IGNvbmZpZy5yb3lhbHRpZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgY2hhcmFjdGVyIHR5cGUgYXMgYSB0cmFpdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YS5hdHRyaWJ1dGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhaXRfdHlwZTogXCJDaGFyYWN0ZXIgVHlwZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNoYXJhY3Rlci5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFyaXR5OiAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGFzc2V0IHRvIGNvbGxlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHRva2VuSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWl0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gWWllbGQgZXhlY3V0aW9uIHRvIHByZXZlbnQgVUkgZnJlZXplXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsR2VuZXJhdGVkICs9IGNoYXJhY3RlclRvR2VuZXJhdGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBMZWdhY3kgZ2VuZXJhdGlvbiB3aXRob3V0IGNoYXJhY3RlcnNcclxuICAgICAgICAgICAgICAgIC8vIC4uLiBleGlzdGluZyBnZW5lcmF0aW9uIGNvZGUgLi4uXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHNldEdlbmVyYXRlZEFzc2V0cyhhc3NldHMpO1xyXG4gICAgICAgICAgICBzZXRQcm9ncmVzcyh7IGN1cnJlbnQ6IGFzc2V0cy5sZW5ndGgsIHRvdGFsOiBhc3NldHMubGVuZ3RoLCBzdGF0dXM6ICdHZW5lcmF0aW9uIGNvbXBsZXRlIScgfSk7XHJcbiAgICAgICAgICAgIHNldENvbGxlY3Rpb25Db25maWcoY29uZmlnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNhdmUgdG8gbG9jYWxTdG9yYWdlXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2V0UHJvZ3Jlc3MoeyBjdXJyZW50OiAwLCB0b3RhbDogMCwgc3RhdHVzOiAnJyB9KTtcclxuICAgICAgICAgICAgfSwgMjAwMCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignR2VuZXJhdGlvbiBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHRvYXN0LmVycm9yKCdFcnJvciBkdXJpbmcgZ2VuZXJhdGlvbjogJyArIChlcnJvciBhcyBFcnJvcikubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgc2V0SXNHZW5lcmF0aW5nKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9LCBbbGF5ZXJzLCBydWxlcywgY2hhcmFjdGVycywgc2V0UHJvZ3Jlc3NdKTtcclxuXHJcbiAgICAvLyBMb2FkIHNhdmVkIGNvbGxlY3Rpb24gY29uZmlnIG9ubHkgb25jZSBvbiBtb3VudFxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBjb25zdCBzYXZlZENvbmZpZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCduZnRfY29sbGVjdGlvbl9jb25maWcnKTtcclxuICAgICAgICBpZiAoc2F2ZWRDb25maWcpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2Uoc2F2ZWRDb25maWcpO1xyXG4gICAgICAgICAgICAgICAgc2V0Q29sbGVjdGlvbkNvbmZpZyhwYXJzZWQpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHBhcnNlIHNhdmVkIGNvbmZpZzonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LCBbXSk7IC8vIEVtcHR5IGRlcGVuZGVuY3kgYXJyYXlcclxuXHJcbiAgICBjb25zdCBoYW5kbGVOZXh0U3RlcCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgICAgICBzZXRDdXJyZW50U3RlcChwcmV2ID0+IHByZXYgKyAxKTtcclxuICAgIH0sIFtdKTtcclxuXHJcbiAgICBjb25zdCBoYW5kbGVQcmV2aW91c1N0ZXAgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICAgICAgc2V0Q3VycmVudFN0ZXAocHJldiA9PiBwcmV2IC0gMSk7XHJcbiAgICB9LCBbXSk7XHJcblxyXG4gICAgY29uc3QgaGFuZGxlRXhwb3J0ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgICAgIC8vIEV4cG9ydCBsb2dpYy4uLlxyXG4gICAgfSwgW10pO1xyXG5cclxuICAgIC8vIExvYWQgc2F2ZWQgbGF5ZXJzIG9uIG1vdW50XHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHNhdmVkTGF5ZXJzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRfbGF5ZXJzJyk7XHJcbiAgICAgICAgY29uc3Qgc2F2ZWRSdWxlcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXJyZW50X3J1bGVzJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHNhdmVkTGF5ZXJzKSB7XHJcbiAgICAgICAgICAgIHNldExheWVycyhKU09OLnBhcnNlKHNhdmVkTGF5ZXJzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzYXZlZFJ1bGVzKSB7XHJcbiAgICAgICAgICAgIHNldFJ1bGVzKEpTT04ucGFyc2Uoc2F2ZWRSdWxlcykpO1xyXG4gICAgICAgIH1cclxuICAgIH0sIFtdKTtcclxuXHJcbiAgICAvLyBDbGVhciBzYXZlZCBkYXRhIHdoZW4gbGVhdmluZyB0cmFpdCB1cGxvYWRlclxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBpZiAoY3VycmVudFN0ZXAgIT09IDIpIHtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2N1cnJlbnRfbGF5ZXJzJyk7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdjdXJyZW50X3J1bGVzJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgW2N1cnJlbnRTdGVwXSk7XHJcblxyXG4gICAgLy8gU2ltcGxpZmllZCBzdGVwIGNsaWNrIGhhbmRsZXIgLSBhbGxvd3MgbmF2aWdhdGlvbiB0byBhbnkgc3RlcFxyXG4gICAgY29uc3QgaGFuZGxlU3RlcENsaWNrID0gKHN0ZXBJZDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgc2V0Q3VycmVudFN0ZXAoc3RlcElkKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgaGFuZGxlTGF5ZXJVcGxvYWQgPSAobmV3TGF5ZXJzOiBUcmFpdExheWVyW10pID0+IHtcclxuICAgICAgICBzZXRMYXllcnMobmV3TGF5ZXJzKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gQWRkIGhlbHBlciBmdW5jdGlvbnNcclxuICAgIGNvbnN0IHZhbGlkYXRlVHJhaXROYW1lID0gKGxheWVySWQ6IHN0cmluZywgdHJhaXROYW1lOiBzdHJpbmcsIGxheWVyczogVHJhaXRMYXllcltdLCB0cmFpdElkPzogc3RyaW5nKTogYm9vbGVhbiA9PiB7XHJcbiAgICAgICAgY29uc3QgbGF5ZXIgPSBsYXllcnMuZmluZCgobCkgPT4gbC5pZCA9PT0gbGF5ZXJJZCk7XHJcbiAgICAgICAgaWYgKCFsYXllcikgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuICFsYXllci50cmFpdHMuc29tZSgodCkgPT4gXHJcbiAgICAgICAgICAgIHQubmFtZS50b0xvd2VyQ2FzZSgpID09PSB0cmFpdE5hbWUudG9Mb3dlckNhc2UoKSAmJiBcclxuICAgICAgICAgICAgKCF0cmFpdElkIHx8IHQuaWQgIT09IHRyYWl0SWQpXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gVXBkYXRlIHRoZSBnZW5lcmF0aW9uIHByb2Nlc3MgdG8gaW5jbHVkZSByYXJpdHkgaW5mb3JtYXRpb24gaW4gbWV0YWRhdGFcclxuICAgIGNvbnN0IGNyZWF0ZUFzc2V0ID0gYXN5bmMgKFxyXG4gICAgICAgIHRyYWl0czogVHJhaXRbXSwgXHJcbiAgICAgICAgaWQ6IG51bWJlciwgXHJcbiAgICAgICAgc2V0dGluZ3M6IEdlbmVyYXRpb25TZXR0aW5nc1xyXG4gICAgKTogUHJvbWlzZTxHZW5lcmF0ZWRBc3NldD4gPT4ge1xyXG4gICAgICAgIC8vIENyZWF0ZSBhIGNhbnZhcyBlbGVtZW50XHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgaWYgKCFjdHgpIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGdldCBjYW52YXMgY29udGV4dCcpO1xyXG5cclxuICAgICAgICAvLyBTZXQgY2FudmFzIGRpbWVuc2lvbnNcclxuICAgICAgICBjYW52YXMud2lkdGggPSBzZXR0aW5ncy5yZXNvbHV0aW9uLndpZHRoO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzZXR0aW5ncy5yZXNvbHV0aW9uLmhlaWdodDtcclxuXHJcbiAgICAgICAgLy8gRmlsbCB3aXRoIGJhY2tncm91bmQgY29sb3JcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gc2V0dGluZ3MuYmFja2dyb3VuZENvbG9yO1xyXG4gICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBEcmF3IGVhY2ggdHJhaXRcclxuICAgICAgICBmb3IgKGNvbnN0IHRyYWl0IG9mIHRyYWl0cykge1xyXG4gICAgICAgICAgICAvLyBTa2lwIHRyYWl0cyB3aXRoIG5vIGltYWdlIGRhdGFcclxuICAgICAgICAgICAgaWYgKCF0cmFpdC5wcmV2aWV3ICYmICghdHJhaXQuaW1hZ2UgfHwgdHJhaXQuaW1hZ2UgaW5zdGFuY2VvZiBCbG9iKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBUcmFpdCAke3RyYWl0Lm5hbWV9IGhhcyBubyB1c2FibGUgaW1hZ2UgZGF0YWApO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIExvYWQgdGhlIGltYWdlXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICAgICAgICAgIGltZy5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBVc2UgcHJldmlldyBpZiBpdCdzIG5vdCBlbXB0eSwgb3RoZXJ3aXNlIHVzZSBpbWFnZSBpZiBpdCdzIGEgc3RyaW5nXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbWFnZVNvdXJjZSA9IHRyYWl0LnByZXZpZXcgfHwgKHR5cGVvZiB0cmFpdC5pbWFnZSA9PT0gJ3N0cmluZycgPyB0cmFpdC5pbWFnZSA6ICcnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCFpbWFnZVNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgTm8gdmFsaWQgaW1hZ2Ugc291cmNlIGZvciB0cmFpdCAke3RyYWl0Lm5hbWV9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIExvYWQgdGhlIGltYWdlXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWcub25lcnJvciA9ICgpID0+IHJlamVjdChuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIGltYWdlIGZvciB0cmFpdDogJHt0cmFpdC5uYW1lfWApKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gaW1hZ2VTb3VyY2U7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBsb2FkaW5nIHRyYWl0IGltYWdlOiAke3RyYWl0Lm5hbWV9YCwgZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDb252ZXJ0IGNhbnZhcyB0byBkYXRhIFVSTFxyXG4gICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGNhbnZhcy50b0RhdGFVUkwoYGltYWdlLyR7c2V0dGluZ3MuZm9ybWF0fWApO1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYW5kIHJldHVybiB0aGUgYXNzZXRcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgaW1hZ2U6IGltYWdlRGF0YSxcclxuICAgICAgICAgICAgdHJhaXRzOiB0cmFpdHMubWFwKHRyYWl0ID0+ICh7XHJcbiAgICAgICAgICAgICAgICB0cmFpdF90eXBlOiB0cmFpdC5sYXllck5hbWUsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogdHJhaXQubmFtZSxcclxuICAgICAgICAgICAgICAgIHJhcml0eTogdHJhaXQucmFyaXR5IHx8IDUwIC8vIERlZmF1bHQgdG8gNTAlIGlmIHJhcml0eSBpcyB1bmRlZmluZWRcclxuICAgICAgICAgICAgfSkpLFxyXG4gICAgICAgICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogYCR7c2V0dGluZ3MubmFtZVByZWZpeH0ke2lkfWAsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogc2V0dGluZ3MuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICBpbWFnZTogaW1hZ2VEYXRhLFxyXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlczogdHJhaXRzLm1hcCh0cmFpdCA9PiAoe1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYWl0X3R5cGU6IHRyYWl0LmxheWVyTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdHJhaXQubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICByYXJpdHk6IHRyYWl0LnJhcml0eSB8fCA1MCAvLyBEZWZhdWx0IHRvIDUwJSBpZiByYXJpdHkgaXMgdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHVwZGF0ZVByb2dyZXNzID0gKGN1cnJlbnQ6IG51bWJlciwgdG90YWw6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIHNldFByb2dyZXNzKHByZXYgPT4gKHtcclxuICAgICAgICAgICAgLi4ucHJldixcclxuICAgICAgICAgICAgY3VycmVudCxcclxuICAgICAgICAgICAgc3RhdHVzOiBgR2VuZXJhdGluZyAke2N1cnJlbnR9IG9mICR7dG90YWx9Li4uYFxyXG4gICAgICAgIH0pKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gQWRkIGNsZWFudXAgb24gY29tcG9uZW50IHVubW91bnRcclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgLy8gT25seSBjbGVhciBpZiBuYXZpZ2F0aW5nIGF3YXkgZnJvbSB0aGUgZ2VuZXJhdGUgZmxvd1xyXG4gICAgICAgICAgICBpZiAoIXdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5pbmNsdWRlcygnL2NyZWF0ZScpKSB7XHJcbiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCdjdXJyZW50X2dlbmVyYXRlZF9hc3NldHMnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9LCBbXSk7XHJcblxyXG4gICAgLy8gQWRkIGZ1bmN0aW9uIHRvIHJlZ2VuZXJhdGUgaW1hZ2VzIGZyb20gc3RvcmVkIGRhdGFcclxuICAgIGNvbnN0IHJlZ2VuZXJhdGVJbWFnZXNGcm9tVHJhaXRzID0gYXN5bmMgKHN0b3JlZEFzc2V0czogU3RvcmVkQXNzZXRbXSk6IFByb21pc2U8R2VuZXJhdGVkQXNzZXRbXT4gPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlZ2VuZXJhdGVkOiBHZW5lcmF0ZWRBc3NldFtdID0gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZGVmYXVsdFNldHRpbmdzOiBHZW5lcmF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgICAgICAgICAgIHN1cHBseTogY29sbGVjdGlvbkNvbmZpZy5zdXBwbHksXHJcbiAgICAgICAgICAgIHByZXZlbnREdXBsaWNhdGVzOiB0cnVlLFxyXG4gICAgICAgICAgICBzaHVmZmxlT3V0cHV0OiB0cnVlLFxyXG4gICAgICAgICAgICBtYXhSZXRyaWVzOiAyMDAsXHJcbiAgICAgICAgICAgIGZvcm1hdDogY29sbGVjdGlvbkNvbmZpZy5mb3JtYXQgYXMgJ3BuZycgfCAnanBnJyB8ICd3ZWJwJyxcclxuICAgICAgICAgICAgcmVzb2x1dGlvbjogY29sbGVjdGlvbkNvbmZpZy5yZXNvbHV0aW9uLFxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjRkZGRkZGJyxcclxuICAgICAgICAgICAgc3RhcnRUb2tlbklkOiBOdW1iZXIoY29sbGVjdGlvbkNvbmZpZy5zdGFydFRva2VuSWQpLFxyXG4gICAgICAgICAgICBuYW1lUHJlZml4OiBjb2xsZWN0aW9uQ29uZmlnLm5hbWVQcmVmaXgsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBjb2xsZWN0aW9uQ29uZmlnLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3IgKGNvbnN0IGFzc2V0IG9mIHN0b3JlZEFzc2V0cykge1xyXG4gICAgICAgICAgICAvLyBGaW5kIHRoZSBhY3R1YWwgdHJhaXQgb2JqZWN0cyBmcm9tIHRoZSBsYXllcnNcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRUcmFpdHMgPSBhc3NldC50cmFpdHMubWFwKHRyYWl0ID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxheWVyID0gbGF5ZXJzLmZpbmQobCA9PiBsLm5hbWUgPT09IHRyYWl0LnRyYWl0X3R5cGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxheWVyPy50cmFpdHMuZmluZCh0ID0+IHQubmFtZSA9PT0gdHJhaXQudmFsdWUpO1xyXG4gICAgICAgICAgICB9KS5maWx0ZXIoQm9vbGVhbik7XHJcblxyXG4gICAgICAgICAgICAvLyBSZWdlbmVyYXRlIHRoZSBpbWFnZVxyXG4gICAgICAgICAgICBjb25zdCBpbWFnZSA9IGF3YWl0IGNyZWF0ZUltYWdlKHNlbGVjdGVkVHJhaXRzIGFzIFRyYWl0W10sIGRlZmF1bHRTZXR0aW5ncyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZWdlbmVyYXRlZC5wdXNoKHtcclxuICAgICAgICAgICAgICAgIC4uLmFzc2V0LFxyXG4gICAgICAgICAgICAgICAgaW1hZ2UsXHJcbiAgICAgICAgICAgICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGAke2NvbGxlY3Rpb25Db25maWcubmFtZVByZWZpeH0ke2Fzc2V0LmlkfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGNvbGxlY3Rpb25Db25maWcuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2U6IGAke2Fzc2V0LmlkfS4ke2RlZmF1bHRTZXR0aW5ncy5mb3JtYXR9YCxcclxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBhc3NldC50cmFpdHNcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVnZW5lcmF0ZWQ7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIExvYWQgc2F2ZWQgYXNzZXRzIG9uIG1vdW50XHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dlbmVyYXRlZF9hc3NldHNfY291bnQnKSB8fCAnMCcpO1xyXG4gICAgICAgICAgICBpZiAoY291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaHVua3MgPSBNYXRoLmNlaWwoY291bnQgLyAxMCk7IC8vIEFzc3VtaW5nIENIVU5LX1NJWkUgaXMgMTBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxvYWRlZEFzc2V0czogR2VuZXJhdGVkQXNzZXRbXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNodW5rczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2h1bmsgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgZ2VuZXJhdGVkX2Fzc2V0c18ke2l9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlZEFzc2V0cy5wdXNoKC4uLkpTT04ucGFyc2UoY2h1bmspKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGxvYWRlZEFzc2V0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0R2VuZXJhdGVkQXNzZXRzKGxvYWRlZEFzc2V0cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIHNhdmVkIGFzc2V0czonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgW10pO1xyXG5cclxuICAgIFxyXG5cclxuICAgIC8vIExvYWQgc2F2ZWQgYXNzZXRzIG9uIG1vdW50LCBidXQgbm90IGZvciBwcmV2aWV3IHN0ZXBcclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc2F2ZWRBc3NldHMgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdjdXJyZW50X2dlbmVyYXRlZF9hc3NldHMnKTtcclxuICAgICAgICBpZiAoc2F2ZWRBc3NldHMpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2Uoc2F2ZWRBc3NldHMpO1xyXG4gICAgICAgICAgICAgICAgc2V0R2VuZXJhdGVkQXNzZXRzKHBhcnNlZCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIHNhdmVkIGFzc2V0czonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LCBbXSk7XHJcblxyXG4gICAgLy8gT25seSBjbGVhciBzdG9yYWdlIHdoZW4gbGVhdmluZyB0aGUgZ2VuZXJhdGUgZmxvdyBjb21wbGV0ZWx5XHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmluY2x1ZGVzKCcvY3JlYXRlJykpIHtcclxuICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ2N1cnJlbnRfZ2VuZXJhdGVkX2Fzc2V0cycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFtdKTtcclxuXHJcbiAgICAvLyBMb2FkIHNhdmVkIGFzc2V0cyBvbiBtb3VudCwgYnV0IG5vdCBmb3IgcHJldmlldyBzdGVwXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGlmIChjdXJyZW50U3RlcCAhPT0gMykge1xyXG4gICAgICAgICAgICBjb25zdCBzYXZlZEFzc2V0cyA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRfZ2VuZXJhdGVkX2Fzc2V0cycpO1xyXG4gICAgICAgICAgICBpZiAoc2F2ZWRBc3NldHMpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShzYXZlZEFzc2V0cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0R2VuZXJhdGVkQXNzZXRzKHBhcnNlZCk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgc2F2ZWQgYXNzZXRzOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sIFtjdXJyZW50U3RlcF0pO1xyXG5cclxuICAgIC8vIENsZWFuIHVwIG9iamVjdCBVUkxzIG9uIHVubW91bnRcclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgLy8gQ2xlYXIgYWxsIGdlbmVyYXRlZCBhc3NldHMgYW5kIHRlbXBvcmFyeSBmaWxlc1xyXG4gICAgICAgICAgICBpZiAod2luZG93LlVSTCkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmV2b2tlIGFueSBvYmplY3QgVVJMc1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW1nW3NyY149XCJibG9iOlwiXScpLmZvckVhY2goaW1nID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKChpbWcgYXMgSFRNTEltYWdlRWxlbWVudCkuc3JjKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFtdKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgdGhlIGhhbmRsZVN0ZXBDaGFuZ2UgZnVuY3Rpb25cclxuICAgIGNvbnN0IGhhbmRsZVN0ZXBDaGFuZ2UgPSAobmV3U3RlcDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgaWYgKG5ld1N0ZXAgPT09IDQgJiYgKCFnZW5lcmF0ZWRBc3NldHMgfHwgZ2VuZXJhdGVkQXNzZXRzLmxlbmd0aCA9PT0gMCkpIHtcclxuICAgICAgICAgICAgdG9hc3QuZXJyb3IoJ1BsZWFzZSBnZW5lcmF0ZSBhc3NldHMgZmlyc3QnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRDdXJyZW50U3RlcChuZXdTdGVwKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgaGFuZGxlU3VwcGx5Q2hhbmdlID0gKG5ld1N1cHBseTogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgc2V0U3VwcGx5KG5ld1N1cHBseSk7XHJcbiAgICAgICAgaWYgKGNvbGxlY3Rpb25Db25maWcpIHtcclxuICAgICAgICAgICAgc2V0Q29sbGVjdGlvbkNvbmZpZyh7XHJcbiAgICAgICAgICAgICAgICAuLi5jb2xsZWN0aW9uQ29uZmlnLFxyXG4gICAgICAgICAgICAgICAgc3VwcGx5OiBuZXdTdXBwbHlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBoYW5kbGVDb21wbGV0ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgICAgICAvLyBDbGVhciBzdG9yZWQgZGF0YVxyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCduZnRfbGF5ZXJzJyk7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ25mdF9ydWxlcycpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCduZnRfY29sbGVjdGlvbl9jb25maWcnKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBSZXNldCBzdGF0ZXNcclxuICAgICAgICBzZXRMYXllcnMoW10pO1xyXG4gICAgICAgIHNldFJ1bGVzKFtdKTtcclxuICAgICAgICBzZXRHZW5lcmF0ZWRBc3NldHMoW10pO1xyXG4gICAgICAgIHNldENvbGxlY3Rpb25Db25maWcoe1xyXG4gICAgICAgICAgICBzdXBwbHk6IDEwMCxcclxuICAgICAgICAgICAgbmFtZTogJycsXHJcbiAgICAgICAgICAgIHN5bWJvbDogJycsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcclxuICAgICAgICAgICAgbmFtZVByZWZpeDogJyMnLFxyXG4gICAgICAgICAgICBzdGFydFRva2VuSWQ6IDAsXHJcbiAgICAgICAgICAgIGZvcm1hdDogJ3BuZycsXHJcbiAgICAgICAgICAgIHJlc29sdXRpb246IHsgd2lkdGg6IDEwMjQsIGhlaWdodDogMTAyNCB9LFxyXG4gICAgICAgICAgICByb3lhbHRpZXM6IDAsXHJcbiAgICAgICAgICAgIGNyZWF0b3JBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgZXh0ZXJuYWxVcmw6ICcnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gUmVkaXJlY3QgdG8gaG9tZSBvciBzdWNjZXNzIHBhZ2VcclxuICAgICAgICByb3V0ZXIucHVzaCgnLycpO1xyXG4gICAgfSwgW3JvdXRlcl0pO1xyXG5cclxuICAgIGNvbnN0IHJlbmRlckN1cnJlbnRTdGVwID0gKCkgPT4ge1xyXG4gICAgICAgIHN3aXRjaCAoY3VycmVudFN0ZXApIHtcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICA8Q29sbGVjdGlvbkNvbmZpZ0NvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpZ1VwZGF0ZT17KGNvbmZpZykgPT4gc2V0Q29sbGVjdGlvbkNvbmZpZyhjb25maWcpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbk5leHQ9eygpID0+IHNldEN1cnJlbnRTdGVwKDIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkJhY2s9eygpID0+IHJvdXRlci5wdXNoKCcvJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVOYXZpZ2F0aW9uPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxUcmFpdFVwbG9hZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uTmV4dD17KCkgPT4gc2V0Q3VycmVudFN0ZXAoMyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQmFjaz17KCkgPT4gc2V0Q3VycmVudFN0ZXAoMSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uTGF5ZXJzVXBkYXRlPXsodXBkYXRlZExheWVycywgdXBkYXRlZFJ1bGVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IHRoZSBydWxlcyBiYWNrIHRvIG91ciBmb3JtYXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnZlcnRlZFJ1bGVzID0gdXBkYXRlZFJ1bGVzIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdXBkYXRlZFJ1bGVzLm1hcChydWxlID0+IGFkYXB0UnVsZUZyb21UcmFpdFVwbG9hZGVyKHJ1bGUgYXMgVHJhaXRVcGxvYWRlclJ1bGUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlTGF5ZXJzVXBkYXRlKHVwZGF0ZWRMYXllcnMsIGNvbnZlcnRlZFJ1bGVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJzPXtsYXllcnN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxSdWxlcz17cnVsZXMubWFwKGFkYXB0UnVsZUZvclRyYWl0VXBsb2FkZXIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFyYWN0ZXJzPXtjaGFyYWN0ZXJzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlTmF2aWdhdGlvbj17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICA8UHJldmlld0dlbmVyYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVycz17bGF5ZXJzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBydWxlcz17cnVsZXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzR2VuZXJhdGluZz17aXNHZW5lcmF0aW5nfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcz17cHJvZ3Jlc3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uR2VuZXJhdGU9e2hhbmRsZUdlbmVyYXRlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkJhY2s9eygpID0+IHNldEN1cnJlbnRTdGVwKDIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbk5leHQ9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZW5lcmF0ZWRBc3NldHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRTdGVwKDQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdC5lcnJvcignUGxlYXNlIGdlbmVyYXRlIGFzc2V0cyBmaXJzdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZWRBc3NldHM9e2dlbmVyYXRlZEFzc2V0c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbkNvbmZpZz17Y29sbGVjdGlvbkNvbmZpZ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25MYXllcnNVcGRhdGU9e2hhbmRsZUxheWVyc1VwZGF0ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25Bc3NldHNHZW5lcmF0ZWQ9e3NldEdlbmVyYXRlZEFzc2V0c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VwcGx5PXtjb2xsZWN0aW9uQ29uZmlnLnN1cHBseX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25TdXBwbHlDaGFuZ2U9e2hhbmRsZVN1cHBseUNoYW5nZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVycz17Y2hhcmFjdGVyc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZU5hdmlnYXRpb249e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPEV4cG9ydEFzc2V0c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZWRBc3NldHM9e2dlbmVyYXRlZEFzc2V0c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25CYWNrPXsoKSA9PiBzZXRDdXJyZW50U3RlcCgzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZT17aGFuZGxlQ29tcGxldGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25Db25maWc9e2NvbGxlY3Rpb25Db25maWd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVOYXZpZ2F0aW9uPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDxkaXY+SW52YWxpZCBzdGVwPC9kaXY+O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmNvbnRhaW5lcn0+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuaGVhZGVyfT5cclxuICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gcm91dGVyLnB1c2goJy9jcmVhdGUnKX0gY2xhc3NOYW1lPXtzdHlsZXMuYmFja0J1dHRvbn0+XHJcbiAgICAgICAgPEFycm93TGVmdCBzaXplPXsyMH0gLz5cclxuICAgICAgICBCYWNrXHJcbiAgICA8L2J1dHRvbj5cclxuICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuc3RlcHNXcmFwcGVyfT5cclxuICAgICAgICA8YnV0dG9uIFxyXG4gICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVQcmV2aW91c31cclxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtzdHlsZXMubmF2QnV0dG9ufSAke2N1cnJlbnRTdGVwID09PSAxID8gc3R5bGVzLmRpc2FibGVkIDogJyd9YH1cclxuICAgICAgICAgICAgZGlzYWJsZWQ9e2N1cnJlbnRTdGVwID09PSAxfVxyXG4gICAgICAgID5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtzdHlsZXMubmF2SW5kaWNhdG9yfT5QcmV2aW91czoge2N1cnJlbnRTdGVwID4gMSA/IHN0ZXBzW2N1cnJlbnRTdGVwIC0gMl0udGl0bGUgOiAnJ308L3NwYW4+XHJcbiAgICAgICAgICAgIDxBcnJvd0xlZnQgc2l6ZT17MjB9IC8+XHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5zdGVwc30+XHJcbiAgICAgICAgICAgIDxkaXYgXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5wcm9ncmVzc0Jhcn0gXHJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYCR7KChjdXJyZW50U3RlcCAtIDEpIC8gMykgKiAxMDB9JWAgfX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAge3N0ZXBzLm1hcCgoc3RlcCwgaW5kZXgpID0+IChcclxuICAgICAgICAgICAgICAgIDxkaXYgXHJcbiAgICAgICAgICAgICAgICAgICAga2V5PXtzdGVwLmlkfVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7c3R5bGVzLnN0ZXB9ICR7Y3VycmVudFN0ZXAgPj0gc3RlcC5pZCA/IHN0eWxlcy5hY3RpdmUgOiAnJ31gfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuc3RlcEljb259PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7c3RlcC5pY29ufVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuc3RlcENvbnRlbnR9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDM+e3N0ZXAudGl0bGV9PC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+e3N0ZXAuZGVzY3JpcHRpb259PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICkpfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxidXR0b24gXHJcbiAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZU5leHR9XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7c3R5bGVzLm5hdkJ1dHRvbn0gJHtjdXJyZW50U3RlcCA9PT0gNCA/IHN0eWxlcy5kaXNhYmxlZCA6ICcnfWB9XHJcbiAgICAgICAgICAgIGRpc2FibGVkPXtjdXJyZW50U3RlcCA9PT0gNH1cclxuICAgICAgICA+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17c3R5bGVzLm5hdkluZGljYXRvcn0+TmV4dDoge2N1cnJlbnRTdGVwIDwgNCA/IHN0ZXBzW2N1cnJlbnRTdGVwXS50aXRsZSA6ICcnfTwvc3Bhbj5cclxuICAgICAgICAgICAgPEFycm93UmlnaHQgc2l6ZT17MjB9IC8+XHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICA8L2Rpdj5cclxuPC9kaXY+XHJcblxyXG48ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmNvbnRlbnR9PlxyXG4gICAge3JlbmRlckN1cnJlbnRTdGVwKCl9XHJcbjwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEdlbmVyYXRlQ29sbGVjdGlvbjtcclxuXHJcbi8vIEFkZCBoZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBCbG9iIHRvIGJhc2U2NCBzdHJpbmdcclxuY29uc3QgYmxvYlRvQmFzZTY0ID0gKGJsb2I6IEJsb2IpOiBQcm9taXNlPHN0cmluZz4gPT4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVhZGVyLnJlc3VsdCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdGYWlsZWQgdG8gY29udmVydCBibG9iIHRvIGJhc2U2NCcpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSByZWplY3Q7XHJcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbi8vIEFkZCBoZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBiYXNlNjQgYmFjayB0byBCbG9iXHJcbmNvbnN0IGJhc2U2NFRvQmxvYiA9IChiYXNlNjQ6IHN0cmluZywgdHlwZTogc3RyaW5nKTogQmxvYiA9PiB7XHJcbiAgICBjb25zdCBieXRlU3RyaW5nID0gYXRvYihiYXNlNjQuc3BsaXQoJywnKVsxXSk7XHJcbiAgICBjb25zdCBhYiA9IG5ldyBBcnJheUJ1ZmZlcihieXRlU3RyaW5nLmxlbmd0aCk7XHJcbiAgICBjb25zdCBpYSA9IG5ldyBVaW50OEFycmF5KGFiKTtcclxuICAgIFxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlU3RyaW5nLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWFbaV0gPSBieXRlU3RyaW5nLmNoYXJDb2RlQXQoaSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBuZXcgQmxvYihbYWJdLCB7IHR5cGUgfSk7XHJcbn07XHJcblxyXG4vLyBVcGRhdGUgaXNEdXBsaWNhdGVDb21iaW5hdGlvbiBmdW5jdGlvbiB0byBtYXRjaCBQcmV2aWV3R2VuZXJhdGVcclxuY29uc3QgaXNEdXBsaWNhdGVDb21iaW5hdGlvbiA9IChcclxuICAgIG5ld1RyYWl0czogQXJyYXk8eyB0cmFpdF90eXBlOiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4sXHJcbiAgICBleGlzdGluZ0Fzc2V0czogR2VuZXJhdGVkQXNzZXRbXVxyXG4pOiBib29sZWFuID0+IHtcclxuICAgIHJldHVybiBleGlzdGluZ0Fzc2V0cy5zb21lKGFzc2V0ID0+IHtcclxuICAgICAgICByZXR1cm4gYXNzZXQudHJhaXRzLmV2ZXJ5KGV4aXN0aW5nVHJhaXQgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3VHJhaXRzLnNvbWUobmV3VHJhaXQgPT4gXHJcbiAgICAgICAgICAgICAgICBuZXdUcmFpdC50cmFpdF90eXBlID09PSBleGlzdGluZ1RyYWl0LnRyYWl0X3R5cGUgJiYgXHJcbiAgICAgICAgICAgICAgICBuZXdUcmFpdC52YWx1ZSA9PT0gZXhpc3RpbmdUcmFpdC52YWx1ZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vLyBGaXggdGhlIGNyZWF0ZUltYWdlIGZ1bmN0aW9uXHJcbmNvbnN0IGNyZWF0ZUltYWdlID0gYXN5bmMgKFxyXG4gICAgc2VsZWN0ZWRUcmFpdHM6IFRyYWl0W10sXHJcbiAgICBzZXR0aW5ncz86IEdlbmVyYXRpb25TZXR0aW5nc1xyXG4pOiBQcm9taXNlPHN0cmluZz4gPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICBpZiAoIWN0eCkgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgZ2V0IGNhbnZhcyBjb250ZXh0Jyk7XHJcblxyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHNldHRpbmdzPy5yZXNvbHV0aW9uPy53aWR0aCB8fCAxMDI0O1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzZXR0aW5ncz8ucmVzb2x1dGlvbj8uaGVpZ2h0IHx8IDEwMjQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRmlsbCB3aXRoIGJhY2tncm91bmQgY29sb3JcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gc2V0dGluZ3M/LmJhY2tncm91bmRDb2xvciB8fCAnI0ZGRkZGRic7XHJcbiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAgIC8vIERyYXcgZWFjaCB0cmFpdFxyXG4gICAgICAgIGZvciAoY29uc3QgdHJhaXQgb2Ygc2VsZWN0ZWRUcmFpdHMpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIFNraXAgdHJhaXRzIHdpdGggbm8gaW1hZ2UgZGF0YVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0cmFpdC5wcmV2aWV3ICYmICghdHJhaXQuaW1hZ2UgfHwgdHJhaXQuaW1hZ2UgaW5zdGFuY2VvZiBCbG9iKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVHJhaXQgJHt0cmFpdC5uYW1lfSBoYXMgbm8gdXNhYmxlIGltYWdlIGRhdGFgKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSBhd2FpdCBuZXcgUHJvbWlzZTxIVE1MSW1hZ2VFbGVtZW50PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1nLmNyb3NzT3JpZ2luID0gJ2Fub255bW91cyc7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHJlc29sdmUoaW1nKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWcub25lcnJvciA9ICgpID0+IHJlamVjdChuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIGltYWdlIGZvciB0cmFpdDogJHt0cmFpdC5uYW1lfWApKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBVc2UgcHJldmlldyBpZiBpdCdzIG5vdCBlbXB0eSwgb3RoZXJ3aXNlIHVzZSBpbWFnZSBpZiBpdCdzIGEgc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1hZ2VTb3VyY2UgPSB0cmFpdC5wcmV2aWV3IHx8ICh0eXBlb2YgdHJhaXQuaW1hZ2UgPT09ICdzdHJpbmcnID8gdHJhaXQuaW1hZ2UgOiAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpbWFnZVNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKGBObyB2YWxpZCBpbWFnZSBzb3VyY2UgZm9yIHRyYWl0OiAke3RyYWl0Lm5hbWV9YCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSBpbWFnZVNvdXJjZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltYWdlLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZHJhd2luZyB0cmFpdCAke3RyYWl0Lm5hbWV9OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNhbnZhcy50b0RhdGFVUkwoYGltYWdlLyR7c2V0dGluZ3M/LmZvcm1hdCB8fCAncG5nJ31gKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgaW1hZ2U6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxufTtcclxuXHJcbi8vIEFkZCBoZWxwZXIgZnVuY3Rpb25zIGZvciBjaGFyYWN0ZXItYmFzZWQgZ2VuZXJhdGlvblxyXG5jb25zdCBzZWxlY3RUcmFpdENvbWJpbmF0aW9uID0gYXN5bmMgKFxyXG4gICAgY2hhcmFjdGVyTGF5ZXJzOiBUcmFpdExheWVyW10sXHJcbiAgICBydWxlczogUnVsZVtdLFxyXG4gICAgc2V0dGluZ3M6IEdlbmVyYXRpb25TZXR0aW5nc1xyXG4pOiBQcm9taXNlPFRyYWl0W10+ID0+IHtcclxuICAgIC8vIFVzZSB0aGUgZXhpc3Rpbmcgc2VsZWN0VHJhaXRzIGZ1bmN0aW9uIG9yIGltcGxlbWVudCBhIHNpbXBsaWZpZWQgdmVyc2lvblxyXG4gICAgcmV0dXJuIHNlbGVjdFRyYWl0cyhjaGFyYWN0ZXJMYXllcnMsIHJ1bGVzKTtcclxufTtcclxuXHJcbmNvbnN0IGdlbmVyYXRlSW1hZ2UgPSBhc3luYyAoXHJcbiAgICBzZWxlY3RlZFRyYWl0czogVHJhaXRbXSxcclxuICAgIHNldHRpbmdzOiBHZW5lcmF0aW9uU2V0dGluZ3MsXHJcbiAgICBjaGFyYWN0ZXJOYW1lOiBzdHJpbmdcclxuKTogUHJvbWlzZTx7IGltYWdlOiBCbG9iOyB0cmFpdHM6IEFycmF5PHsgdHJhaXRfdHlwZTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nOyByYXJpdHk6IG51bWJlciB9PiB9PiA9PiB7XHJcbiAgICAvLyBEcmF3IHRyYWl0cyBvbiBjYW52YXNcclxuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICBcclxuICAgIGlmICghY3R4KSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgY3JlYXRlIGNhbnZhcyBjb250ZXh0Jyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFNldCBjYW52YXMgc2l6ZSBiYXNlZCBvbiBzZXR0aW5nc1xyXG4gICAgY2FudmFzLndpZHRoID0gc2V0dGluZ3MucmVzb2x1dGlvbj8ud2lkdGggfHwgMTAyNDtcclxuICAgIGNhbnZhcy5oZWlnaHQgPSBzZXR0aW5ncy5yZXNvbHV0aW9uPy5oZWlnaHQgfHwgMTAyNDtcclxuICAgIFxyXG4gICAgLy8gU2V0IGJhY2tncm91bmQgY29sb3IgaWYgc3BlY2lmaWVkXHJcbiAgICBpZiAoc2V0dGluZ3MuYmFja2dyb3VuZENvbG9yKSB7XHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHNldHRpbmdzLmJhY2tncm91bmRDb2xvcjtcclxuICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gU29ydCB0cmFpdHMgYnkgei1pbmRleCAoaWYgYXZhaWxhYmxlKVxyXG4gICAgY29uc3Qgc29ydGVkVHJhaXRzID0gWy4uLnNlbGVjdGVkVHJhaXRzXS5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYUluZGV4ID0gYS56SW5kZXggfHwgMDtcclxuICAgICAgICBjb25zdCBiSW5kZXggPSBiLnpJbmRleCB8fCAwO1xyXG4gICAgICAgIHJldHVybiBhSW5kZXggLSBiSW5kZXg7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gRHJhdyBlYWNoIHRyYWl0XHJcbiAgICBmb3IgKGNvbnN0IHRyYWl0IG9mIHNvcnRlZFRyYWl0cykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBpbWc6IEhUTUxJbWFnZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRyYWl0LmltYWdlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgLy8gRm9yIGRhdGEgVVJMcyBvciBwYXRoc1xyXG4gICAgICAgICAgICAgICAgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWcub25lcnJvciA9ICgpID0+IHJlamVjdChuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIGltYWdlIGZvciAke3RyYWl0Lm5hbWV9YCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSB0cmFpdC5pbWFnZSBhcyBzdHJpbmc7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0cmFpdC5pbWFnZSBpbnN0YW5jZW9mIEJsb2IpIHtcclxuICAgICAgICAgICAgICAgIC8vIEZvciBibG9iIGltYWdlc1xyXG4gICAgICAgICAgICAgICAgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHRyYWl0LmltYWdlKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gKCkgPT4gcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltZy5vbmVycm9yID0gKCkgPT4gcmVqZWN0KG5ldyBFcnJvcihgRmFpbGVkIHRvIGxvYWQgaW1hZ2UgZm9yICR7dHJhaXQubmFtZX1gKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1nLnNyYyA9IHVybDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRyYWl0LnByZXZpZXcpIHtcclxuICAgICAgICAgICAgICAgIC8vIFVzZSBwcmV2aWV3IGFzIGZhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gKCkgPT4gcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltZy5vbmVycm9yID0gKCkgPT4gcmVqZWN0KG5ldyBFcnJvcihgRmFpbGVkIHRvIGxvYWQgcHJldmlldyBmb3IgJHt0cmFpdC5uYW1lfWApKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gdHJhaXQucHJldmlldztcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBObyB2YWxpZCBpbWFnZSBmb3IgdHJhaXQ6ICR7dHJhaXQubmFtZX1gKTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBEcmF3IHRoZSBpbWFnZVxyXG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZHJhd2luZyB0cmFpdCAke3RyYWl0Lm5hbWV9OmAsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIENvbnZlcnQgY2FudmFzIHRvIGJsb2JcclxuICAgIGNvbnN0IGZvcm1hdCA9IHNldHRpbmdzLmZvcm1hdCB8fCAncG5nJztcclxuICAgIGNvbnN0IGltYWdlID0gYXdhaXQgbmV3IFByb21pc2U8QmxvYj4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGNhbnZhcy50b0Jsb2IoXHJcbiAgICAgICAgICAgIChibG9iKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmxvYikgcmVzb2x2ZShibG9iKTtcclxuICAgICAgICAgICAgICAgIGVsc2UgcmVqZWN0KG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBpbWFnZSBibG9iJykpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBgaW1hZ2UvJHtmb3JtYXR9YCxcclxuICAgICAgICAgICAgMC45XHJcbiAgICAgICAgKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvLyBQcmVwYXJlIHRyYWl0IGF0dHJpYnV0ZXNcclxuICAgIGNvbnN0IHRyYWl0cyA9IHNvcnRlZFRyYWl0cy5tYXAodHJhaXQgPT4gKHtcclxuICAgICAgICB0cmFpdF90eXBlOiB0cmFpdC5sYXllck5hbWUsXHJcbiAgICAgICAgdmFsdWU6IHRyYWl0Lm5hbWUsXHJcbiAgICAgICAgcmFyaXR5OiB0cmFpdC5yYXJpdHkgfHwgMFxyXG4gICAgfSkpO1xyXG4gICAgXHJcbiAgICByZXR1cm4geyBpbWFnZSwgdHJhaXRzIH07XHJcbn07XHJcblxyXG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZUNhbGxiYWNrIiwidXNlUm91dGVyIiwiQXJyb3dMZWZ0IiwiQXJyb3dSaWdodCIsIlNldHRpbmdzIiwiTGF5ZXJzIiwiSW1hZ2VQbHVzIiwiRG93bmxvYWQiLCJzdHlsZXMiLCJUcmFpdFVwbG9hZGVyIiwiUHJldmlld0dlbmVyYXRlIiwiRXhwb3J0QXNzZXRzIiwiQ29sbGVjdGlvbkNvbmZpZ0NvbXBvbmVudCIsInRvYXN0Iiwic2VsZWN0VHJhaXRzIiwiYWRhcHRSdWxlRm9yVHJhaXRVcGxvYWRlciIsInJ1bGUiLCJpZCIsInR5cGUiLCJzb3VyY2VMYXllcklkIiwic291cmNlVHJhaXQiLCJ0YXJnZXRMYXllcklkIiwidGFyZ2V0VHJhaXQiLCJ0cmFpdHMiLCJhZGFwdFJ1bGVGcm9tVHJhaXRVcGxvYWRlciIsInN0ZXBzIiwidGl0bGUiLCJpY29uIiwic2l6ZSIsImRlc2NyaXB0aW9uIiwiR2VuZXJhdGVDb2xsZWN0aW9uIiwicm91dGVyIiwiY3VycmVudFN0ZXAiLCJzZXRDdXJyZW50U3RlcCIsImxheWVycyIsInNldExheWVycyIsInJ1bGVzIiwic2V0UnVsZXMiLCJjaGFyYWN0ZXJzIiwic2V0Q2hhcmFjdGVycyIsImdlbmVyYXRlZEFzc2V0cyIsInNldEdlbmVyYXRlZEFzc2V0cyIsImlzR2VuZXJhdGluZyIsInNldElzR2VuZXJhdGluZyIsInN0b3JlZExheWVycyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzdG9yZWRSdWxlcyIsInN0b3JlZENoYXJhY3RlcnMiLCJKU09OIiwicGFyc2UiLCJlIiwiY29uc29sZSIsImVycm9yIiwiY29sbGVjdGlvbkNvbmZpZyIsInNldENvbGxlY3Rpb25Db25maWciLCJzdXBwbHkiLCJuYW1lIiwic3ltYm9sIiwibmFtZVByZWZpeCIsInN0YXJ0VG9rZW5JZCIsImZvcm1hdCIsInJlc29sdXRpb24iLCJ3aWR0aCIsImhlaWdodCIsInJveWFsdGllcyIsImNyZWF0b3JBZGRyZXNzIiwiZXh0ZXJuYWxVcmwiLCJwcm9ncmVzcyIsInNldFByb2dyZXNzIiwiY3VycmVudCIsInRvdGFsIiwic3RhdHVzIiwiaGFuZGxlTmV4dCIsImhhbmRsZVByZXZpb3VzIiwic2V0U3VwcGx5IiwiaGFuZGxlQ29uZmlnVXBkYXRlIiwiY29uZmlnIiwicHJldkNvbmZpZyIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJoYW5kbGVMYXllcnNVcGRhdGUiLCJ1cGRhdGVkTGF5ZXJzIiwidXBkYXRlZFJ1bGVzIiwibG9nIiwiQXJyYXkiLCJpc0FycmF5IiwiRXJyb3IiLCJydWxlc1RvU2V0IiwibGVuZ3RoIiwic3RvcmFnZUVycm9yIiwiaGFuZGxlQ2hhcmFjdGVyc1VwZGF0ZSIsInVwZGF0ZWRDaGFyYWN0ZXJzIiwiYWxsTGF5ZXJzIiwicmVkdWNlIiwiYWNjIiwiY2hhcmFjdGVyIiwiaGFuZGxlR2VuZXJhdGUiLCJzZXR0aW5ncyIsImFzc2V0cyIsInRvdGFsR2VuZXJhdGVkIiwidG90YWxUb0dlbmVyYXRlIiwiY2hhcmFjdGVyU3VtbWFyeSIsIm1hcCIsImMiLCJqb2luIiwiY2hhcmFjdGVyTGF5ZXJzIiwiZmlsdGVyIiwibCIsImNoYXJhY3RlcklkIiwiY2hhcmFjdGVyVG9HZW5lcmF0ZSIsIk1hdGgiLCJtaW4iLCJpIiwic2VsZWN0ZWRUcmFpdHMiLCJzZWxlY3RUcmFpdENvbWJpbmF0aW9uIiwidG9rZW5JZCIsIm5mdE5hbWUiLCJpbWFnZSIsImdlbmVyYXRlSW1hZ2UiLCJtZXRhZGF0YSIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsImF0dHJpYnV0ZXMiLCJ0cmFpdCIsInRyYWl0X3R5cGUiLCJ2YWx1ZSIsInJhcml0eSIsImNyZWF0b3IiLCJ1bmRlZmluZWQiLCJwdXNoIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwibWVzc2FnZSIsInNhdmVkQ29uZmlnIiwicGFyc2VkIiwiaGFuZGxlTmV4dFN0ZXAiLCJwcmV2IiwiaGFuZGxlUHJldmlvdXNTdGVwIiwiaGFuZGxlRXhwb3J0Iiwic2F2ZWRMYXllcnMiLCJzYXZlZFJ1bGVzIiwicmVtb3ZlSXRlbSIsImhhbmRsZVN0ZXBDbGljayIsInN0ZXBJZCIsImhhbmRsZUxheWVyVXBsb2FkIiwibmV3TGF5ZXJzIiwidmFsaWRhdGVUcmFpdE5hbWUiLCJsYXllcklkIiwidHJhaXROYW1lIiwidHJhaXRJZCIsImxheWVyIiwiZmluZCIsInNvbWUiLCJ0IiwidG9Mb3dlckNhc2UiLCJjcmVhdGVBc3NldCIsImNhbnZhcyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImN0eCIsImdldENvbnRleHQiLCJmaWxsU3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJmaWxsUmVjdCIsInByZXZpZXciLCJCbG9iIiwid2FybiIsImltZyIsIkltYWdlIiwiY3Jvc3NPcmlnaW4iLCJpbWFnZVNvdXJjZSIsInJlamVjdCIsIm9ubG9hZCIsIm9uZXJyb3IiLCJzcmMiLCJkcmF3SW1hZ2UiLCJpbWFnZURhdGEiLCJ0b0RhdGFVUkwiLCJsYXllck5hbWUiLCJ1cGRhdGVQcm9ncmVzcyIsIndpbmRvdyIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJpbmNsdWRlcyIsInNlc3Npb25TdG9yYWdlIiwicmVnZW5lcmF0ZUltYWdlc0Zyb21UcmFpdHMiLCJzdG9yZWRBc3NldHMiLCJyZWdlbmVyYXRlZCIsImRlZmF1bHRTZXR0aW5ncyIsInByZXZlbnREdXBsaWNhdGVzIiwic2h1ZmZsZU91dHB1dCIsIm1heFJldHJpZXMiLCJOdW1iZXIiLCJhc3NldCIsIkJvb2xlYW4iLCJjcmVhdGVJbWFnZSIsImNvdW50IiwicGFyc2VJbnQiLCJjaHVua3MiLCJjZWlsIiwibG9hZGVkQXNzZXRzIiwiY2h1bmsiLCJzYXZlZEFzc2V0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwicmV2b2tlT2JqZWN0VVJMIiwiaGFuZGxlU3RlcENoYW5nZSIsIm5ld1N0ZXAiLCJoYW5kbGVTdXBwbHlDaGFuZ2UiLCJuZXdTdXBwbHkiLCJoYW5kbGVDb21wbGV0ZSIsInJlbmRlckN1cnJlbnRTdGVwIiwib25Db25maWdVcGRhdGUiLCJvbk5leHQiLCJvbkJhY2siLCJoaWRlTmF2aWdhdGlvbiIsIm9uTGF5ZXJzVXBkYXRlIiwiY29udmVydGVkUnVsZXMiLCJpbml0aWFsUnVsZXMiLCJvbkdlbmVyYXRlIiwib25Bc3NldHNHZW5lcmF0ZWQiLCJvblN1cHBseUNoYW5nZSIsIm9uQ29tcGxldGUiLCJkaXYiLCJjbGFzc05hbWUiLCJjb250YWluZXIiLCJoZWFkZXIiLCJidXR0b24iLCJvbkNsaWNrIiwiYmFja0J1dHRvbiIsInN0ZXBzV3JhcHBlciIsIm5hdkJ1dHRvbiIsImRpc2FibGVkIiwic3BhbiIsIm5hdkluZGljYXRvciIsInByb2dyZXNzQmFyIiwic3R5bGUiLCJzdGVwIiwiaW5kZXgiLCJhY3RpdmUiLCJzdGVwSWNvbiIsInN0ZXBDb250ZW50IiwiaDMiLCJwIiwiY29udGVudCIsImJsb2JUb0Jhc2U2NCIsImJsb2IiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkZW5kIiwicmVzdWx0IiwicmVhZEFzRGF0YVVSTCIsImJhc2U2NFRvQmxvYiIsImJhc2U2NCIsImJ5dGVTdHJpbmciLCJhdG9iIiwic3BsaXQiLCJhYiIsIkFycmF5QnVmZmVyIiwiaWEiLCJVaW50OEFycmF5IiwiY2hhckNvZGVBdCIsImlzRHVwbGljYXRlQ29tYmluYXRpb24iLCJuZXdUcmFpdHMiLCJleGlzdGluZ0Fzc2V0cyIsImV2ZXJ5IiwiZXhpc3RpbmdUcmFpdCIsIm5ld1RyYWl0IiwiY2hhcmFjdGVyTmFtZSIsInNvcnRlZFRyYWl0cyIsInNvcnQiLCJhIiwiYiIsImFJbmRleCIsInpJbmRleCIsImJJbmRleCIsInVybCIsInRvQmxvYiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/pages/create/generate.tsx\n"));

/***/ })

});